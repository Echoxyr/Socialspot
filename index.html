/*
 * app.js - SocialSpot Enhanced Application
 * Versione avanzata con performance ottimizzate, nuove funzionalit√† e UX migliorata
 */
// üîπ Supabase Configuration
const SUPABASE_URL = 'https://ctixzrxyyqpumzwmyjyo.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN0aXh6cnh5eXFwdW16d215anlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwMTYzNDQsImV4cCI6MjA3OTU5MjM0NH0.k8HDt4WbU6RwMktolucWc1dekPwfbOk853o7AABRt4o';
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
// üîπ PERFORMANCE MONITORING
const PerformanceMonitor = {
    startTime: performance.now(),
    logPageLoad() {
        const loadTime = performance.now() - this.startTime;
        console.log(`üöÄ SocialSpot loaded in ${loadTime.toFixed(2)}ms`);
        if (window.gtag) {
            window.gtag('event', 'page_load_time', {
                value: Math.round(loadTime),
                event_category: 'Performance'
            });
        }
    },
    logUserAction(action, duration = 0) {
        console.log(`üìä User action: ${action} ${duration > 0 ? `(${duration}ms)` : ''}`);
    }
};
// üîπ ENHANCED WELCOME POPUP
function WelcomePopup({ user, onClose }) {
    const [showPopup, setShowPopup] = React.useState(false);
    const [currentFeature, setCurrentFeature] = React.useState(0);
    const features = [
        {
            icon: 'fas fa-calendar-plus',
            title: 'Crea Eventi',
            description: 'Organizza eventi unici e coinvolgi la tua community locale'
        },
        {
            icon: 'fas fa-users',
            title: 'Partecipa',
            description: 'Scopri eventi interessanti e conosci persone con i tuoi stessi interessi'
        },
        {
            icon: 'fas fa-comments',
            title: 'Chatta',
            description: 'Comunica in tempo reale con altri partecipanti nelle chat di gruppo'
        },
        {
            icon: 'fas fa-star',
            title: 'Gamification',
            description: 'Guadagna punti, sali di livello e sblocca achievement speciali'
        }
    ];
    React.useEffect(() => {
        const hasSeenWelcome = localStorage.getItem(`welcomed_${user.id}`);
        if (!hasSeenWelcome) {
            setTimeout(() => setShowPopup(true), 500);
        }
    }, [user.id]);
    React.useEffect(() => {
        if (showPopup) {
            const interval = setInterval(() => {
                setCurrentFeature((prev) => (prev + 1) % features.length);
            }, 3000);
            return () => clearInterval(interval);
        }
    }, [showPopup, features.length]);
    const handleClose = () => {
        localStorage.setItem(`welcomed_${user.id}`, 'true');
        setShowPopup(false);
        PerformanceMonitor.logUserAction('welcome_popup_closed');
        if (onClose) onClose();
    };
    if (!showPopup) return null;
    return (
        <div className="welcome-popup-overlay" onClick={handleClose}>
            <div className="welcome-popup animate-scale-in" onClick={(e) => e.stopPropagation()}>
                <div className="welcome-header">
                    <div className="logo-icon float-animation">
                        <span className="logo-text">SS</span>
                    </div>
                    <h2>Benvenuto in SocialSpot! üéâ</h2>
                    <p>Siamo felici di averti nella nostra community!</p>
                </div>
                <div className="welcome-content">
                    <div className="welcome-features">
                        {features.map((feature, index) => (
                            <div 
                                key={index}
                                className={`feature-item ${index === currentFeature ? 'animate-fade-in-up' : ''}`}
                                style={{
                                    opacity: index === currentFeature ? 1 : 0.7,
                                    transform: index === currentFeature ? 'scale(1.05)' : 'scale(1)'
                                }}
                            >
                                <i className={feature.icon}></i>
                                <h3>{feature.title}</h3>
                                <p>{feature.description}</p>
                            </div>
                        ))}
                    </div>
                    <div className="feature-indicators" style={{ 
                        display: 'flex', 
                        justifyContent: 'center', 
                        gap: '8px', 
                        marginTop: '20px' 
                    }}>
                        {features.map((_, index) => (
                            <div
                                key={index}
                                style={{
                                    width: '8px',
                                    height: '8px',
                                    borderRadius: '50%',
                                    backgroundColor: index === currentFeature ? '#2563eb' : '#d1d5db',
                                    transition: 'all 0.3s ease'
                                }}
                            />
                        ))}
                    </div>
                </div>
                <button className="btn-primary welcome-btn glow-animation" onClick={handleClose}>
                    <i className="fas fa-rocket"></i>
                    Inizia la tua avventura!
                </button>
            </div>
        </div>
    );
}
// üîπ ENHANCED NOTIFICATION SYSTEM
function NotificationSystem() {
    const [notifications, setNotifications] = React.useState([]);
    const addNotification = React.useCallback((notification) => {
        const id = Date.now();
        const newNotification = { ...notification, id };
        setNotifications(prev => [...prev, newNotification]);
        setTimeout(() => {
            setNotifications(prev => prev.filter(n => n.id !== id));
        }, 5000);
    }, []);
    const removeNotification = React.useCallback((id) => {
        setNotifications(prev => prev.filter(n => n.id !== id));
    }, []);
    React.useEffect(() => {
        window.addNotification = addNotification;
    }, [addNotification]);
    return (
        <div className="notification-container" style={{
            position: 'fixed',
            top: '20px',
            right: '20px',
            zIndex: 1500,
            display: 'flex',
            flexDirection: 'column',
            gap: '12px'
        }}>
            {notifications.map((notification) => (
                <div
                    key={notification.id}
                    className={`notification ${notification.type || 'info'} animate-slide-in-right`}
                    style={{
                        background: 'var(--color-surface)',
                        border: '1px solid var(--color-border)',
                        borderRadius: 'var(--radius-xl)',
                        padding: 'var(--space-4)',
                        boxShadow: 'var(--shadow-lg)',
                        maxWidth: '350px',
                        cursor: 'pointer'
                    }}
                    onClick={() => removeNotification(notification.id)}
                >
                    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                        <i className={`fas ${notification.icon || 'fa-info-circle'}`} style={{
                            color: notification.type === 'success' ? 'var(--color-success-500)' :
                                   notification.type === 'error' ? 'var(--color-error-500)' :
                                   notification.type === 'warning' ? 'var(--color-warning-500)' :
                                   'var(--color-primary-500)'
                        }}></i>
                        <div style={{ flex: 1 }}>
                            <div style={{ fontWeight: 'var(--font-weight-semibold)', marginBottom: '4px' }}>
                                {notification.title}
                            </div>
                            <div style={{ fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' }}>
                                {notification.message}
                            </div>
                        </div>
                        <i className="fas fa-times" style={{ 
                            color: 'var(--color-text-muted)', 
                            fontSize: 'var(--font-size-xs)' 
                        }}></i>
                    </div>
                </div>
            ))}
        </div>
    );
}
// üîπ ENHANCED SIDE MENU
function SideMenu({ isOpen, onClose, user, onSignOut, theme, onToggleTheme, currentPage, onPageChange }) {
    const [userStats, setUserStats] = React.useState(null);
    React.useEffect(() => {
       if (isOpen && user) {
           loadUserStats();
       }
   }, [isOpen, user]);
   const loadUserStats = async () => {
       try {
           const { data: created } = await supabase
               .from('events')
               .select('id')
               .eq('creator_id', user.id);
           const { data: joined } = await supabase
               .from('event_participants')
               .select('event_id, events!inner(creator_id)')
               .eq('user_id', user.id)
               .neq('events.creator_id', user.id);
           const createdEvents = created ? created.length : 0;
           const joinedEvents = joined ? joined.length : 0;
           const totalPoints = createdEvents * 5 + joinedEvents * 2;
           const level = Math.floor(totalPoints / 100) + 1;
           setUserStats({
               eventsCreated: createdEvents,
               eventsJoined: joinedEvents,
               totalPoints,
               level
           });
       } catch (error) {
           console.error('Error loading user stats:', error);
       }
   };
   const menuItems = [
       { icon: 'fas fa-home', label: 'Eventi', action: 'feed', page: 'feed' },
       { icon: 'fas fa-plus-circle', label: 'Crea Evento', action: 'create', page: 'create' },
       { icon: 'fas fa-user', label: 'Profilo', action: 'profile', page: 'profile' },
       { icon: 'fas fa-star', label: 'Preferiti', action: 'favorites', page: 'favorites' },
       { icon: 'fas fa-chart-line', label: 'Statistiche', action: 'stats', page: 'stats' },
       { icon: 'fas fa-cog', label: 'Impostazioni', action: 'settings', page: 'settings' },
       { icon: 'fas fa-info-circle', label: 'Info & Supporto', action: 'info', page: 'info' }
   ];
   const handleMenuClick = (action, page) => {
       PerformanceMonitor.logUserAction(`menu_${action}_clicked`);
       switch (action) {
           case 'logout':
               onSignOut();
               break;
           case 'feed':
           case 'create':
           case 'profile':
               onPageChange(page);
               break;
           case 'favorites':
               window.addNotification?.({
                   type: 'info',
                   icon: 'fas fa-star',
                   title: 'Preferiti',
                   message: 'Funzionalit√† in arrivo presto!'
               });
               break;
           case 'stats':
               window.addNotification?.({
                   type: 'info',
                   icon: 'fas fa-chart-line',
                   title: 'Statistiche',
                   message: 'Dashboard avanzate in sviluppo!'
               });
               break;
           case 'settings':
               window.addNotification?.({
                   type: 'info',
                   icon: 'fas fa-cog',
                   title: 'Impostazioni',
                   message: 'Pannello impostazioni in arrivo!'
               });
               break;
           case 'info':
               window.addNotification?.({
                   type: 'success',
                   icon: 'fas fa-heart',
                   title: 'SocialSpot v2.0',
                   message: 'Grazie per essere parte della community!'
               });
               break;
           default:
               console.log(`Azione ${action} non implementata`);
       }
       onClose();
   };
   if (!isOpen) return null;
   const initials = user.email ? user.email[0].toUpperCase() : '?';
   return (
       <>
           <div className="side-menu-overlay" onClick={onClose}></div>
           <div className="side-menu animate-slide-in-right">
               <div className="side-menu-header">
                   <div className="user-info">
                       <div className="user-avatar glow-animation">
                           {initials}
                       </div>
                       <div className="user-details">
                           <h3>{user.email}</h3>
                           <p>Membro della community</p>
                           {userStats && (
                               <div style={{ 
                                   marginTop: '8px', 
                                   display: 'flex', 
                                   gap: '12px',
                                   fontSize: 'var(--font-size-xs)',
                                   color: 'var(--color-text-muted)'
                               }}>
                                   <span>üìä {userStats.totalPoints} punti</span>
                                   <span>‚≠ê Livello {userStats.level}</span>
                               </div>
                           )}
                       </div>
                   </div>
                   <button className="side-menu-close" onClick={onClose}>
                       <i className="fas fa-times"></i>
                   </button>
               </div>
               <div className="side-menu-content">
                   <nav className="menu-nav">
                       {menuItems.map((item, index) => (
                           <button
                               key={index}
                               className={`menu-item ${item.page === currentPage ? 'active' : ''}`}
                               onClick={() => handleMenuClick(item.action, item.page)}
                               style={{
                                   background: item.page === currentPage ? 
                                       'linear-gradient(135deg, var(--color-primary-50), var(--color-secondary-50))' : 
                                       'none',
                                   color: item.page === currentPage ? 'var(--color-primary-600)' : 'inherit'
                               }}
                           >
                               <i className={item.icon}></i>
                               <span>{item.label}</span>
                               <i className="fas fa-chevron-right"></i>
                           </button>
                       ))}
                       <button
                           className="menu-item"
                           onClick={() => handleMenuClick('logout')}
                           style={{ 
                               marginTop: 'var(--space-4)',
                               borderTop: '1px solid var(--color-border-light)',
                               paddingTop: 'var(--space-4)',
                               color: 'var(--color-error-600)'
                           }}
                       >
                           <i className="fas fa-sign-out-alt"></i>
                           <span>Logout</span>
                           <i className="fas fa-chevron-right"></i>
                       </button>
                   </nav>
                   <div className="theme-section">
                       <div className="theme-toggle-section">
                           <div className="theme-info">
                               <i className="fas fa-palette"></i>
                               <span>Tema: {theme === 'light' ? 'Chiaro' : 'Scuro'}</span>
                           </div>
                           <button className="theme-switch" onClick={onToggleTheme}>
                               <i className={theme === 'light' ? 'fas fa-moon' : 'fas fa-sun'}></i>
                           </button>
                       </div>
                   </div>
               </div>
               <div className="side-menu-footer">
                   <p>SocialSpot v2.0</p>
                   <p>Connetti ‚Ä¢ Scopri ‚Ä¢ Partecipa</p>
               </div>
           </div>
       </>
   );
}
// üîπ ENHANCED HEADER
function Header({ user, currentPage, setPage, onSignOut, theme, onToggleTheme }) {
   const [sideMenuOpen, setSideMenuOpen] = React.useState(false);
   const [isScrolled, setIsScrolled] = React.useState(false);
   React.useEffect(() => {
       const handleScroll = () => {
           setIsScrolled(window.scrollY > 10);
       };
       window.addEventListener('scroll', handleScroll);
       return () => window.removeEventListener('scroll', handleScroll);
   }, []);
   const handlePageChange = (page) => {
       setPage(page);
       PerformanceMonitor.logUserAction(`navigate_to_${page}`);
   };
   return (
       <>
           <header className={`main-header ${isScrolled ? 'scrolled' : ''}`} style={{
               boxShadow: isScrolled ? 'var(--shadow-lg)' : 'var(--shadow-sm)',
               background: isScrolled ? 
                   'rgba(255, 255, 255, 0.95)' : 
                   'rgba(255, 255, 255, 0.8)'
           }}>
               <div className="header-container">
                   <button 
                       className="hamburger-menu"
                       onClick={() => setSideMenuOpen(true)}
                       aria-label="Menu"
                   >
                       <i className="fas fa-bars"></i>
                   </button>
                   <div className="app-logo-header" onClick={() => handlePageChange('feed')} style={{ cursor: 'pointer' }}>
                       <div className="logo-icon glow-animation">
                           <span className="logo-text">SS</span>
                       </div>
                       <span className="app-name">SocialSpot</span>
                   </div>
                   <nav className="header-nav">
                       <button 
                           className={`nav-btn ${currentPage === 'feed' ? 'active' : ''}`}
                           onClick={() => handlePageChange('feed')}
                       >
                           <i className="fas fa-home"></i>
                           <span>Eventi</span>
                       </button>
                       <button 
                           className={`nav-btn ${currentPage === 'create' ? 'active' : ''}`}
                           onClick={() => handlePageChange('create')}
                       >
                           <i className="fas fa-plus"></i>
                           <span>Crea</span>
                       </button>
                       <button 
                           className={`nav-btn ${currentPage === 'profile' ? 'active' : ''}`}
                           onClick={() => handlePageChange('profile')}
                       >
                           <i className="fas fa-user"></i>
                           <span>Profilo</span>
                       </button>
                   </nav>
               </div>
           </header>
           <SideMenu 
               isOpen={sideMenuOpen}
               onClose={() => setSideMenuOpen(false)}
               user={user}
               onSignOut={onSignOut}
               theme={theme}
               onToggleTheme={onToggleTheme}
               currentPage={currentPage}
               onPageChange={handlePageChange}
           />
       </>
   );
}
// üîπ ENHANCED LOADING SCREEN
function LoadingScreen({ isVisible }) {
   const [loadingText, setLoadingText] = React.useState('Caricamento in corso...');
   React.useEffect(() => {
       if (!isVisible) return;
       const messages = [
           'Caricamento in corso...',
           'Connessione al server...',
           'Preparazione interfaccia...',
           'Quasi pronto...'
       ];
       let index = 0;
       const interval = setInterval(() => {
           index = (index + 1) % messages.length;
           setLoadingText(messages[index]);
       }, 800);
       return () => clearInterval(interval);
   }, [isVisible]);
   if (!isVisible) return null;
   return (
       <div className="loader-screen">
           <div className="loader-content">
               <div className="app-logo-loading">
                   <div className="logo-icon-loading">
                       <span className="logo-text-loading">SS</span>
                       <div className="loading-rings">
                           <div className="ring ring-1"></div>
                           <div className="ring ring-2"></div>
                           <div className="ring ring-3"></div>
                       </div>
                   </div>
                   <h1 className="brand-name-loading">SocialSpot</h1>
                   <p className="brand-tagline">Connetti ‚Ä¢ Scopri ‚Ä¢ Partecipa</p>
               </div>
               <div className="loading-progress">
                   <div className="progress-bar-loading"></div>
                   <p className="loading-text">{loadingText}</p>
               </div>
           </div>
       </div>
   );
}
// üîπ PWA INSTALL PROMPT
function PWAInstallPrompt() {
   const [deferredPrompt, setDeferredPrompt] = React.useState(null);
   const [showInstallButton, setShowInstallButton] = React.useState(false);
   React.useEffect(() => {
       const handleBeforeInstallPrompt = (e) => {
           e.preventDefault();
           setDeferredPrompt(e);
           setShowInstallButton(true);
       };
       window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
       return () => {
           window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
       };
   }, []);
   const handleInstallClick = async () => {
       if (deferredPrompt) {
           deferredPrompt.prompt();
           const result = await deferredPrompt.userChoice;
           if (result.outcome === 'accepted') {
               window.addNotification?.({
                   type: 'success',
                   icon: 'fas fa-download',
                   title: 'App Installata!',
                   message: 'SocialSpot √® ora disponibile nella tua home screen!'
               });
           }
           setDeferredPrompt(null);
           setShowInstallButton(false);
       }
   };
   if (!showInstallButton) return null;
   return (
       <button
           className="install-app-btn glow-animation"
           onClick={handleInstallClick}
           title="Installa SocialSpot"
       >
           <i className="fas fa-download"></i>
       </button>
   );
}
// üîπ ERROR BOUNDARY
class ErrorBoundary extends React.Component {
   constructor(props) {
       super(props);
       this.state = { hasError: false, error: null };
   }
   static getDerivedStateFromError(error) {
       return { hasError: true, error };
   }
   componentDidCatch(error, errorInfo) {
       console.error('SocialSpot Error:', error, errorInfo);
       if (window.Sentry) {
           window.Sentry.captureException(error);
       }
   }
   render() {
       if (this.state.hasError) {
           return (
               <div className="error-boundary" style={{
                   minHeight: '100vh',
                   display: 'flex',
                   alignItems: 'center',
                   justifyContent: 'center',
                   flexDirection: 'column',
                   gap: '20px',
                   padding: '40px',
                   textAlign: 'center'
               }}>
                   <div style={{ fontSize: '4rem' }}>üòµ</div>
                   <h1 style={{ fontSize: '2rem', fontWeight: 'bold', color: 'var(--color-text)' }}>
                       Oops! Qualcosa √® andato storto
                   </h1>
                   <p style={{ color: 'var(--color-text-muted)', maxWidth: '400px' }}>
                       Si √® verificato un errore imprevisto. Prova a ricaricare la pagina o contatta il supporto se il problema persiste.
                   </p>
                   <button 
                       className="btn-primary"
                       onClick={() => window.location.reload()}
                       style={{ marginTop: '20px' }}
                   >
                       <i className="fas fa-redo"></i>
                       Ricarica la pagina
                   </button>
               </div>
           );
       }
       return this.props.children;
   }
}
// üîπ MAIN APP COMPONENT
function App() {
   const [user, setUser] = React.useState(null);
   const [page, setPage] = React.useState('feed');
   const [initializing, setInitializing] = React.useState(true);
   const [showLoader, setShowLoader] = React.useState(true);
   const [theme, setTheme] = React.useState(() => {
       const stored = localStorage.getItem('theme');
       if (stored) return stored;
       return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
   });
   React.useEffect(() => {
       document.body.setAttribute('data-theme', theme);
       localStorage.setItem('theme', theme);
       const themeColorMeta = document.querySelector('meta[name="theme-color"]');
       if (themeColorMeta) {
           themeColorMeta.content = theme === 'dark' ? '#1f2937' : '#2563eb';
       }
   }, [theme]);
   React.useEffect(() => {
       const initAuth = async () => {
           try {
               const { data: { session } } = await supabase.auth.getSession();
               setUser(session?.user ?? null);
           } catch (error) {
               console.error('Auth initialization error:', error);
               window.addNotification?.({
                   type: 'error',
                   icon: 'fas fa-exclamation-triangle',
                   title: 'Errore di connessione',
                   message: 'Problema durante l\'inizializzazione dell\'app'
               });
           } finally {
               setInitializing(false);
           }
       };
       initAuth();
       const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
           setUser(session?.user ?? null);
           if (session?.user) {
               PerformanceMonitor.logUserAction('user_signed_in');
               window.addNotification?.({
                   type: 'success',
                   icon: 'fas fa-user-check',
                   title: 'Accesso effettuato!',
                   message: `Benvenuto ${session.user.email}`
               });
           }
       });
       return () => subscription.unsubscribe();
   }, []);
   React.useEffect(() => {
       if (!initializing) {
           const timer = setTimeout(() => {
               setShowLoader(false);
               PerformanceMonitor.logPageLoad();
           }, 1500);
           return () => clearTimeout(timer);
       }
   }, [initializing]);
   React.useEffect(() => {
       const handleKeyDown = (event) => {
           if (event.altKey && event.key === 'n' && user) {
               event.preventDefault();
               setPage('create');
               PerformanceMonitor.logUserAction('keyboard_shortcut_new_event');
           }
           if (event.altKey && event.key === 'h' && user) {
               event.preventDefault();
               setPage('feed');
               PerformanceMonitor.logUserAction('keyboard_shortcut_home');
           }
           if (event.altKey && event.key === 'p' && user) {
               event.preventDefault();
               setPage('profile');
               PerformanceMonitor.logUserAction('keyboard_shortcut_profile');
           }
       };
       window.addEventListener('keydown', handleKeyDown);
       return () => window.removeEventListener('keydown', handleKeyDown);
   }, [user]);
   const handleSignOut = async () => {
       try {
           await supabase.auth.signOut();
           setUser(null);
           setPage('feed');
           PerformanceMonitor.logUserAction('user_signed_out');
           window.addNotification?.({
               type: 'info',
               icon: 'fas fa-sign-out-alt',
               title: 'Logout effettuato',
               message: 'A presto su SocialSpot!'
           });
       } catch (error) {
           console.error('Sign out error:', error);
           window.addNotification?.({
               type: 'error',
               icon: 'fas fa-exclamation-triangle',
               title: 'Errore logout',
               message: 'Impossibile effettuare il logout'
           });
       }
   };
   const toggleTheme = () => {
       const newTheme = theme === 'light' ? 'dark' : 'light';
       setTheme(newTheme);
       PerformanceMonitor.logUserAction(`theme_changed_to_${newTheme}`);
       window.addNotification?.({
           type: 'info',
           icon: newTheme === 'dark' ? 'fas fa-moon' : 'fas fa-sun',
           title: 'Tema cambiato',
           message: `Attivato tema ${newTheme === 'dark' ? 'scuro' : 'chiaro'}`
       });
   };
   const handlePageChange = (newPage) => {
       if (page !== newPage) {
           setPage(newPage);
           PerformanceMonitor.logUserAction(`page_changed_to_${newPage}`);
       }
   };
   if (initializing || showLoader) {
       return <LoadingScreen isVisible={true} />;
   }
   if (!user) {
       return (
           <ErrorBoundary>
               <NotificationSystem />
               <Auth supabase={supabase} setUser={setUser} />
               <PWAInstallPrompt />
           </ErrorBoundary>
       );
   }
   return (
       <ErrorBoundary>
           <div className="app-container">
               <NotificationSystem />
               <WelcomePopup user={user} />
               <Header
                   user={user}
                   currentPage={page}
                   setPage={handlePageChange}
                   onSignOut={handleSignOut}
                   theme={theme}
                   onToggleTheme={toggleTheme}
               />
               <main className="main-content">
                   <div className="page-transition-enter-active">
                       {page === 'feed' && <EventFeed supabase={supabase} user={user} />}
                       {page === 'create' && <CreateEvent supabase={supabase} user={user} onEventCreated={() => handlePageChange('feed')} />}
                       {page === 'profile' && <ProfilePage supabase={supabase} user={user} theme={theme} onToggleTheme={toggleTheme} />}
                   </div>
               </main>
               <PWAInstallPrompt />
           </div>
       </ErrorBoundary>
   );
}
document.addEventListener('DOMContentLoaded', () => {
   const initialLoader = document.getElementById('initial-loader');
   if (initialLoader) {
       setTimeout(() => {
           initialLoader.style.display = 'none';
       }, 2000);
   }
   const root = ReactDOM.createRoot(document.getElementById('root'));
   root.render(<App />);
   PerformanceMonitor.logUserAction('app_initialized');
});
if ('serviceWorker' in navigator) {
   window.addEventListener('load', () => {
       navigator.serviceWorker.register('/sw.js')
           .then((registration) => {
               console.log('‚úÖ Service Worker registered:', registration.scope);
               registration.addEventListener('updatefound', () => {
                   const newWorker = registration.installing;
                   newWorker.addEventListener('statechange', () => {
                       if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                           window.addNotification?.({
                               type: 'info',
                               icon: 'fas fa-download',
                               title: 'Aggiornamento disponibile',
                               message: 'Ricarica la pagina per la nuova versione!'
                           });
                       }
                   });
               });
           })
           .catch((error) => {
               console.error('‚ùå Service Worker registration failed:', error);
           });
   });
}
window.addEventListener('error', (event) => {
   console.error('Global error:', event.error);
   window.addNotification?.({
       type: 'error',
       icon: 'fas fa-exclamation-triangle',
       title: 'Errore imprevisto',
       message: 'Si √® verificato un problema. Prova a ricaricare la pagina.'
   });
});
window.addEventListener('unhandledrejection', (event) => {
   console.error('Unhandled promise rejection:', event.reason);
   window.addNotification?.({
       type: 'error',
       icon: 'fas fa-exclamation-triangle',
       title: 'Errore di connessione',
       message: 'Problema di rete o server. Riprova tra poco.'
   });
});
if ('performance' in window && 'PerformanceObserver' in window) {
   new PerformanceObserver((list) => {
       for (const entry of list.getEntries()) {
           if (entry.entryType === 'largest-contentful-paint') {
               console.log('üìä LCP:', entry.startTime);
           }
       }
   }).observe({ entryTypes: ['largest-contentful-paint'] });
   new PerformanceObserver((list) => {
       for (const entry of list.getEntries()) {
           if (entry.entryType === 'first-input') {
               console.log('üìä FID:', entry.processingStart - entry.startTime);
           }
       }
   }).observe({ entryTypes: ['first-input'] });
}
window.SocialSpot = {
   supabase,
   PerformanceMonitor,
   version: '2.0.0'
};
console.log('üöÄ SocialSpot v2.0 initialized successfully!');                     
// üîπ AUTH UNIFICATO E CORRETTO
const { useState, useEffect, memo, useCallback } = React;
const Auth = memo(({ supabase, setUser }) => {
    const [isSignIn, setIsSignIn] = useState(true);
    const [formData, setFormData] = useState({
        email: '',
        password: '',
        fullName: '',
        interests: []
    });
    const [error, setError] = useState(null);
    const [loading, setLoading] = useState(false);
    const [passwordStrength, setPasswordStrength] = useState(0);
    const calculatePasswordStrength = useCallback((password) => {
        let strength = 0;
        if (password.length >= 8) strength += 25;
        if (/[A-Z]/.test(password)) strength += 25;
        if (/[0-9]/.test(password)) strength += 25;
        if (/[^A-Za-z0-9]/.test(password)) strength += 25;
        return strength;
    }, []);
    useEffect(() => {
        setPasswordStrength(calculatePasswordStrength(formData.password));
    }, [formData.password, calculatePasswordStrength]);
    const handleInputChange = (field, value) => {
        setFormData(prev => ({
            ...prev,
            [field]: value
        }));
        setError(null);
    };
    const handleInterestToggle = (interest) => {
        setFormData(prev => ({
            ...prev,
            interests: prev.interests.includes(interest)
                ? prev.interests.filter(i => i !== interest)
                : [...prev.interests, interest]
        }));
    };
    const handleAuth = async (e) => {
        e.preventDefault();
        setLoading(true);
        setError(null);
        try {
            let result;
            if (isSignIn) {
                result = await supabase.auth.signInWithPassword({ 
                    email: formData.email, 
                    password: formData.password 
                });
            } else {
                if (!formData.fullName.trim()) {
                    setError('Inserisci il nome completo');
                    setLoading(false);
                    return;
                }
                if (formData.interests.length === 0) {
                    setError('Seleziona almeno un interesse');
                    setLoading(false);
                    return;
                }
                result = await supabase.auth.signUp({ 
                    email: formData.email, 
                    password: formData.password,
                    options: {
                        data: {
                            full_name: formData.fullName.trim(),
                            interests: formData.interests
                        }
                    }
                });
            }
            if (result.error) {
                setError(result.error.message);
            } else if (result.data.user) {
                setUser(result.data.user);
                window.addNotification?.({
                    type: 'success',
                    icon: 'fas fa-check-circle',
                    title: isSignIn ? 'Accesso effettuato!' : 'Registrazione completata!',
                    message: isSignIn ? 'Bentornato!' : 'Benvenuto in SocialSpot!'
                });
            }
        } catch (err) {
            console.error('Auth error:', err);
            setError('Errore di connessione. Riprova.');
        } finally {
            setLoading(false);
        }
    };
    const availableInterests = [
        'Sport', 'Musica', 'Cinema', 'Tecnologia', 'Cucina', 
        'Viaggi', 'Arte', 'Lettura', 'Gaming', 'Fitness',
        'Fotografia', 'Moda', 'Natura'
    ];
    return React.createElement('div', { className: 'auth-wrapper' },
        React.createElement('div', { className: 'auth-container' },
            React.createElement('div', { className: 'auth-header' },
                React.createElement('div', { className: 'logo-icon' },
                    React.createElement('span', { className: 'logo-text' }, 'SS')
                ),
                React.createElement('h1', null, 'SocialSpot'),
                React.createElement('p', null, 'Connetti, Crea, Condividi')
            ),
            React.createElement('div', { className: 'auth-content' },
                React.createElement('div', { className: 'auth-tabs' },
                    React.createElement('button', {
                        className: `auth-tab ${isSignIn ? 'active' : ''}`,
                        onClick: () => setIsSignIn(true)
                    }, 'Accedi'),
                    React.createElement('button', {
                        className: `auth-tab ${!isSignIn ? 'active' : ''}`,
                        onClick: () => setIsSignIn(false)
                    }, 'Registrati')
                ),
                React.createElement('form', { 
                    onSubmit: handleAuth, 
                    className: 'auth-form' 
                },
                    !isSignIn && React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { className: 'form-label' },
                            React.createElement('i', { className: 'fas fa-user' }),
                            ' Nome completo'
                        ),
                        React.createElement('input', {
                            type: 'text',
                            className: 'form-input',
                            value: formData.fullName,
                            onChange: (e) => handleInputChange('fullName', e.target.value),
                            placeholder: 'Il tuo nome completo',
                            required: !isSignIn
                        })
                    ),
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { className: 'form-label' },
                            React.createElement('i', { className: 'fas fa-envelope' }),
                            ' Email'
                        ),
                        React.createElement('input', {
                            type: 'email',
                            className: 'form-input',
                            value: formData.email,
                            onChange: (e) => handleInputChange('email', e.target.value),
                            placeholder: 'Il tuo indirizzo email',
                            required: true
                        })
                    ),
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { className: 'form-label' },
                            React.createElement('i', { className: 'fas fa-lock' }),
                            ' Password'
                        ),
                        React.createElement('input', {
                            type: 'password',
                            className: 'form-input',
                            value: formData.password,
                            onChange: (e) => handleInputChange('password', e.target.value),
                            placeholder: 'La tua password',
                            required: true
                        }),
                        !isSignIn && formData.password && React.createElement('div', { 
                            className: 'password-strength',
                            style: {
                                marginTop: 'var(--space-2)',
                                height: '4px',
                                background: 'var(--color-border)',
                                borderRadius: 'var(--radius-full)',
                                overflow: 'hidden'
                            }
                        },
                            React.createElement('div', {
                                className: 'strength-bar',
                                style: {
                                    width: `${passwordStrength}%`,
                                    height: '100%',
                                    background: passwordStrength < 50 ? 'var(--color-error-500)' : 
                                               passwordStrength < 80 ? 'var(--color-warning-500)' : 
                                               'var(--color-success-500)',
                                    transition: 'var(--transition-all)'
                                }
                            }),
                            React.createElement('span', {
                                className: 'strength-text',
                                style: {
                                    fontSize: 'var(--font-size-xs)',
                                    color: 'var(--color-text-muted)',
                                    marginTop: 'var(--space-1)',
                                    display: 'block'
                                }
                            }, passwordStrength < 50 ? 'Debole' : passwordStrength < 80 ? 'Media' : 'Forte')
                        )
                    ),
                    !isSignIn && React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { className: 'form-label' },
                            React.createElement('i', { className: 'fas fa-star' }),
                            ` Interessi (${formData.interests.length}/5)`
                        ),
                        React.createElement('div', { className: 'interests-grid' },
                            availableInterests.map(interest =>
                                React.createElement('button', {
                                    key: interest,
                                    type: 'button',
                                    className: `interest-chip ${formData.interests.includes(interest) ? 'selected' : ''}`,
                                    onClick: () => handleInterestToggle(interest),
                                    disabled: !formData.interests.includes(interest) && formData.interests.length >= 5
                                }, interest)
                            )
                        )
                    ),
                    error && React.createElement('div', { className: 'error-message' },
                        React.createElement('i', { className: 'fas fa-exclamation-triangle' }),
                        ' ',
                        error
                    ),
                    React.createElement('button', {
                        type: 'submit',
                        className: 'btn-primary',
                        disabled: loading
                    },
                        loading ? [
                            React.createElement('i', { className: 'fas fa-spinner fa-spin', key: 'icon' }),
                            isSignIn ? ' Accesso...' : ' Registrazione...'
                        ] : [
                            React.createElement('i', { 
                                className: `fas ${isSignIn ? 'fa-sign-in-alt' : 'fa-user-plus'}`,
                                key: 'icon'
                            }),
                            isSignIn ? ' Accedi' : ' Registrati'
                        ]
                    )
                )
            )
        )
    );
});
// Follow Button Component
const FollowButton = memo(({ supabase, currentUserId, targetUserId, initialFollowing = false }) => {
    const [following, setFollowing] = useState(initialFollowing);
    const [loading, setLoading] = useState(false);
    const handleToggle = async () => {
        if (loading) return;
        setLoading(true);
        try {
            if (following) {
                await supabase
                    .from('user_follows')
                    .delete()
                    .eq('follower_id', currentUserId)
                    .eq('following_id', targetUserId);
                setFollowing(false);
            } else {
                await supabase
                    .from('user_follows')
                    .insert({ follower_id: currentUserId, following_id: targetUserId });
                setFollowing(true);
                await supabase
                    .from('notifications')
                    .insert({
                        user_id: targetUserId,
                        type: 'new_follower',
                        title: 'Nuovo follower',
                        content: 'Qualcuno ha iniziato a seguirti',
                        data: { follower_id: currentUserId }
                    });
            }
        } catch (err) {
            console.error('Follow toggle error:', err);
        } finally {
            setLoading(false);
        }
    };
    return React.createElement('button', {
        onClick: handleToggle,
        disabled: loading,
        className: `btn-sm ${following ? 'btn-outline' : 'btn-primary'}`,
        style: { minWidth: '100px' }
    }, 
        loading ? React.createElement('i', { className: 'fas fa-spinner fa-spin' }) :
        following ? [
            React.createElement('i', { className: 'fas fa-user-check', key: 'icon' }),
            ' Segui gi√†'
        ] : [
            React.createElement('i', { className: 'fas fa-user-plus', key: 'icon' }),
            ' Segui'
        ]
    );
});
// Pending Approvals Component
const PendingApprovals = memo(({ supabase, event, user, onUpdate }) => {
    const [pending, setPending] = useState([]);
    const [loading, setLoading] = useState(true);
    useEffect(() => {
        if (event.creator_id === user.id && event.requires_approval) {
            loadPending();
            const channel = supabase
                .channel(`approvals_${event.id}`)
                .on('postgres_changes', {
                    event: '*',
                    schema: 'public',
                    table: 'event_participants',
                    filter: `event_id=eq.${event.id}`
                }, loadPending)
                .subscribe();
            return () => supabase.removeChannel(channel);
        }
    }, [event.id, event.creator_id, event.requires_approval, user.id]);
    const loadPending = async () => {
        const { data, error } = await supabase
            .from('event_participants')
            .select(`
                id,
                user_id,
                joined_at,
                profiles!event_participants_user_id_fkey(username, location)
            `)
            .eq('event_id', event.id)
            .eq('status', 'pending');
        if (!error) {
            setPending(data || []);
        }
        setLoading(false);
    };
    const handleApproval = async (participantId, approve) => {
        await supabase
            .from('event_participants')
            .update({ status: approve ? 'approved' : 'rejected' })
            .eq('id', participantId);
        loadPending();
        if (onUpdate) onUpdate();
    };
    if (!event.requires_approval || event.creator_id !== user.id || loading) return null;
    if (pending.length === 0) return null;
    return React.createElement('div', {
        style: {
            marginTop: 'var(--space-6)',
            padding: 'var(--space-6)',
            background: 'var(--color-warning-50)',
            border: '1px solid var(--color-warning-200)',
            borderRadius: 'var(--radius-2xl)'
        }
    },
        React.createElement('h4', {
            style: {
                display: 'flex',
                alignItems: 'center',
                gap: 'var(--space-2)',
                marginBottom: 'var(--space-4)',
                fontWeight: 'var(--font-weight-bold)'
            }
        },
            React.createElement('i', { className: 'fas fa-clock' }),
            ` Richieste in attesa (${pending.length})`
        ),
        pending.map(p => React.createElement('div', {
            key: p.id,
            style: {
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'space-between',
                padding: 'var(--space-4)',
                background: 'var(--color-surface)',
                borderRadius: 'var(--radius-xl)',
                marginBottom: 'var(--space-3)'
            }
        },
            React.createElement('div', null,
                React.createElement('div', { 
                    style: { fontWeight: 'var(--font-weight-semibold)' } 
                }, p.profiles?.username || 'Utente'),
                React.createElement('div', { 
                    style: { fontSize: 'var(--font-size-sm)', color: 'var(--color-text-muted)' } 
                }, new Date(p.joined_at).toLocaleString('it-IT'))
            ),
            React.createElement('div', { style: { display: 'flex', gap: 'var(--space-2)' } },
                React.createElement('button', {
                    onClick: () => handleApproval(p.id, true),
                    className: 'btn-sm btn-primary'
                },
                    React.createElement('i', { className: 'fas fa-check' }),
                    ' Approva'
                ),
                React.createElement('button', {
                    onClick: () => handleApproval(p.id, false),
                    className: 'btn-sm btn-outline',
                    style: { color: 'var(--color-error-600)', borderColor: 'var(--color-error-600)' }
                },
                    React.createElement('i', { className: 'fas fa-times' }),
                    ' Rifiuta'
                )
            )
        ))
    );
});
// Notifications Bell Component
const NotificationsBell = memo(({ supabase, user }) => {
    const [unread, setUnread] = useState(0);
    const [notifications, setNotifications] = useState([]);
    const [showDropdown, setShowDropdown] = useState(false);
    useEffect(() => {
        loadNotifications();
        const channel = supabase
            .channel('notifications_realtime')
            .on('postgres_changes', {
                event: 'INSERT',
                schema: 'public',
                table: 'notifications',
                filter: `user_id=eq.${user.id}`
            }, () => {
                loadNotifications();
            })
            .subscribe();
        return () => supabase.removeChannel(channel);
    }, [user.id]);
    const loadNotifications = async () => {
        const { data, error } = await supabase
            .from('notifications')
            .select('*')
            .eq('user_id', user.id)
            .order('created_at', { ascending: false })
            .limit(10);
        if (!error && data) {
            setNotifications(data);
            setUnread(data.filter(n => !n.is_read).length);
        }
    };
    const markAsRead = async (id) => {
        await supabase
            .from('notifications')
            .update({ is_read: true })
            .eq('id', id);
        loadNotifications();
    };
    const markAllRead = async () => {
        await supabase
            .from('notifications')
            .update({ is_read: true })
            .eq('user_id', user.id)
            .eq('is_read', false);
        loadNotifications();
    };
    return React.createElement('div', { style: { position: 'relative' } },
        React.createElement('button', {
            onClick: () => setShowDropdown(!showDropdown),
            style: {
                position: 'relative',
                padding: 'var(--space-3)',
                background: 'none',
                border: 'none',
                cursor: 'pointer',
                fontSize: 'var(--font-size-xl)',
                color: 'var(--color-text)'
            }
        },
            React.createElement('i', { className: 'fas fa-bell' }),
            unread > 0 && React.createElement('span', {
                style: {
                    position: 'absolute',
                    top: '0',
                    right: '0',
                    background: 'var(--color-error-500)',
                    color: 'white',
                    borderRadius: '50%',
                    width: '18px',
                    height: '18px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontSize: '10px',
                    fontWeight: 'bold'
                }
            }, unread)
        ),
        showDropdown && [
            React.createElement('div', {
                key: 'overlay',
                style: { position: 'fixed', inset: 0, zIndex: 999 },
                onClick: () => setShowDropdown(false)
            }),
            React.createElement('div', {
                key: 'dropdown',
                style: {
                    position: 'absolute',
                    top: '100%',
                    right: 0,
                    marginTop: 'var(--space-2)',
                    width: '350px',
                    maxHeight: '500px',
                    overflowY: 'auto',
                    background: 'var(--color-surface)',
                    border: '1px solid var(--color-border)',
                    borderRadius: 'var(--radius-2xl)',
                    boxShadow: 'var(--shadow-2xl)',
                    zIndex: 1000
                }
            },
                React.createElement('div', {
                    style: {
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                        padding: 'var(--space-4)',
                        borderBottom: '1px solid var(--color-border)'
                    }
                },
                    React.createElement('h4', { style: { fontWeight: 'var(--font-weight-bold)' } }, 'Notifiche'),
                    unread > 0 && React.createElement('button', {
                        onClick: markAllRead,
                        style: {
                            padding: 'var(--space-2) var(--space-3)',
                            fontSize: 'var(--font-size-xs)',
                            background: 'none',
                            border: 'none',
                            color: 'var(--color-primary-600)',
                            cursor: 'pointer',
                            fontWeight: 'var(--font-weight-semibold)'
                        }
                    }, 'Segna tutte lette')
                ),
                notifications.length === 0 ? 
                    React.createElement('div', {
                        style: {
                            padding: 'var(--space-12)',
                            textAlign: 'center',
                            color: 'var(--color-text-muted)'
                        }
                    },
                        React.createElement('i', { 
                            className: 'fas fa-bell-slash', 
                            style: { fontSize: '2rem', marginBottom: 'var(--space-4)' } 
                        }),
                        React.createElement('p', null, 'Nessuna notifica')
                    ) :
                    notifications.map(n => React.createElement('div', {
                        key: n.id,
                        onClick: () => { if (!n.is_read) markAsRead(n.id); },
                        style: {
                            padding: 'var(--space-4)',
                            borderBottom: '1px solid var(--color-border)',
                            cursor: 'pointer',
                            background: n.is_read ? 'transparent' : 'var(--color-primary-50)',
                            transition: 'var(--transition-colors)'
                        }
                    },
                        React.createElement('div', {
                            style: {
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'flex-start',
                                marginBottom: 'var(--space-2)'
                            }
                        },
                            React.createElement('div', { 
                                style: { fontWeight: 'var(--font-weight-semibold)', flex: 1 } 
                            }, n.title),
                            !n.is_read && React.createElement('div', {
                                style: {
                                    width: '8px',
                                    height: '8px',
                                    background: 'var(--color-primary-600)',
                                    borderRadius: '50%'
                                }
                            })
                        ),
                        React.createElement('div', {
                            style: {
                                fontSize: 'var(--font-size-sm)',
                                color: 'var(--color-text-muted)',
                                marginBottom: 'var(--space-1)'
                            }
                        }, n.content),
                        React.createElement('div', {
                            style: {
                                fontSize: 'var(--font-size-xs)',
                                color: 'var(--color-text-muted)'
                            }
                        }, new Date(n.created_at).toLocaleString('it-IT'))
                    ))
            )
        ]
    );
});
// ========================================
// AGGIUNGI QUESTO ALLA FINE DI components.js
// ========================================
// EventFeed Component
function EventFeed({ supabase, user }) {
    const [events, setEvents] = React.useState([]);
    const [loading, setLoading] = React.useState(true);
    const [favorites, setFavorites] = React.useState([]);
    const [participants, setParticipants] = React.useState({});
    const [selectedEvent, setSelectedEvent] = React.useState(null);
    React.useEffect(() => {
        loadEvents();
        loadFavorites();
        loadParticipants();
    }, []);
    const loadEvents = async () => {
        try {
            const { data, error } = await supabase
                .from('events')
                .select('*, profiles!events_creator_id_fkey(username, location)')
                .order('created_at', { ascending: false });
            if (!error) {
                setEvents(data || []);
            }
        } catch (err) {
            console.error('Errore caricamento eventi:', err);
        } finally {
            setLoading(false);
        }
    };
    const loadFavorites = async () => {
        try {
            const { data } = await supabase
                .from('event_favorites')
                .select('event_id')
                .eq('user_id', user.id);
            setFavorites(data ? data.map(f => f.event_id) : []);
        } catch (err) {
            console.error('Errore caricamento favoriti:', err);
        }
    };
    const loadParticipants = async () => {
        try {
            const { data } = await supabase
                .from('event_participants')
                .select('event_id, user_id');
            const counts = {};
            const userParticipations = [];
            (data || []).forEach(p => {
                counts[p.event_id] = (counts[p.event_id] || 0) + 1;
                if (p.user_id === user.id) {
                    userParticipations.push(p.event_id);
                }
            });
            setParticipants({ counts, userParticipations });
        } catch (err) {
            console.error('Errore caricamento partecipanti:', err);
        }
    };
    const toggleFavorite = async (eventId) => {
        const isFavorite = favorites.includes(eventId);
        try {
            if (isFavorite) {
                await supabase
                    .from('event_favorites')
                    .delete()
                    .eq('event_id', eventId)
                    .eq('user_id', user.id);
                setFavorites(favorites.filter(id => id !== eventId));
            } else {
                await supabase
                    .from('event_favorites')
                    .insert({ event_id: eventId, user_id: user.id });
                setFavorites([...favorites, eventId]);
            }
        } catch (err) {
            console.error('Errore toggle favorito:', err);
        }
    };
    const toggleJoin = async (eventId) => {
        const isJoined = participants.userParticipations?.includes(eventId);
        try {
            if (isJoined) {
                await supabase
                    .from('event_participants')
                    .delete()
                    .eq('event_id', eventId)
                    .eq('user_id', user.id);
            } else {
                await supabase
                    .from('event_participants')
                    .insert({ event_id: eventId, user_id: user.id });
            }
            loadParticipants();
        } catch (err) {
            console.error('Errore toggle partecipazione:', err);
        }
    };
    if (loading) {
        return React.createElement('div', { className: 'loading' },
            React.createElement('div', { className: 'spinner' }),
            React.createElement('div', { className: 'loading-text' }, 'Caricamento eventi...')
        );
    }
    return React.createElement('div', { className: 'feed-wrapper' },
        React.createElement('div', { className: 'feed-header' },
            React.createElement('h1', { className: 'feed-title' }, 'üöÄ Scopri Eventi'),
            React.createElement('p', { className: 'feed-subtitle' }, 'Trova esperienze nella tua zona')
        ),
        React.createElement('div', { className: 'event-list' },
            events.length === 0 ? 
                React.createElement('div', { className: 'empty-state' },
                    React.createElement('i', { className: 'fas fa-calendar-times empty-icon' }),
                    React.createElement('h4', null, 'Nessun evento ancora'),
                    React.createElement('p', null, 'Sii il primo a creare un evento!')
                ) :
                events.map(event => 
                    React.createElement('div', { key: event.id, className: 'event-card' },
                        React.createElement('div', { className: 'event-image' },
                            React.createElement('i', { className: 'fas fa-calendar-alt' })
                        ),
                        React.createElement('div', { className: 'event-content' },
                            React.createElement('div', { className: 'event-header' },
                                React.createElement('div', null,
                                    React.createElement('h3', { className: 'event-title' }, event.title),
                                    React.createElement('span', { className: 'event-category' }, event.category || 'Generale')
                                ),
                                React.createElement('button', {
                                    className: `favorite-btn ${favorites.includes(event.id) ? 'favorited' : ''}`,
                                    onClick: () => toggleFavorite(event.id)
                                },
                                    React.createElement('i', { 
                                        className: favorites.includes(event.id) ? 'fas fa-heart' : 'far fa-heart'
                                    })
                                )
                            ),
                            React.createElement('p', { className: 'event-description' }, event.description),
                            React.createElement('div', { className: 'event-meta' },
                                React.createElement('div', { className: 'event-meta-item' },
                                    React.createElement('i', { className: 'fas fa-user' }),
                                    React.createElement('span', null, event.profiles?.username || 'Utente')
                                ),
                                React.createElement('div', { className: 'event-meta-item' },
                                    React.createElement('i', { className: 'fas fa-map-marker-alt' }),
                                    React.createElement('span', null, event.location || 'Online')
                                ),
                                React.createElement('div', { className: 'event-meta-item' },
                                    React.createElement('i', { className: 'fas fa-calendar' }),
                                    React.createElement('span', null, event.event_date ? new Date(event.event_date).toLocaleDateString('it-IT') : 'Data da definire')
                                ),
                                React.createElement('div', { className: 'event-meta-item' },
                                    React.createElement('i', { className: 'fas fa-users' }),
                                    React.createElement('span', null, `${participants.counts?.[event.id] || 0} partecipanti`)
                                )
                            ),
                            React.createElement('div', { className: 'event-actions' },
                                React.createElement('button', {
                                    className: `btn-primary ${participants.userParticipations?.includes(event.id) ? 'btn-outline' : ''}`,
                                    onClick: () => toggleJoin(event.id)
                                },
                                    React.createElement('i', { className: 'fas fa-user-plus' }),
                                    participants.userParticipations?.includes(event.id) ? ' Iscritto' : ' Partecipa'
                                ),
                                React.createElement('button', {
                                    className: 'btn-outline',
                                    onClick: () => setSelectedEvent(event)
                                },
                                    React.createElement('i', { className: 'fas fa-info-circle' }),
                                    ' Dettagli'
                                )
                            )
                        )
                    )
                )
        )
    );
}
// CreateEvent Component
function CreateEvent({ supabase, user, onEventCreated }) {
    const [formData, setFormData] = React.useState({
        title: '',
        description: '',
        location: '',
        event_date: '',
        category: ''
    });
    const [loading, setLoading] = React.useState(false);
    const [error, setError] = React.useState('');
    const [success, setSuccess] = React.useState(false);
    const handleChange = (field, value) => {
        setFormData(prev => ({ ...prev, [field]: value }));
        setError('');
    };
    const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);
        setError('');
        try {
            const { error: insertError } = await supabase
                .from('events')
                .insert({
                    title: formData.title,
                    description: formData.description,
                    location: formData.location,
                    event_date: formData.event_date,
                    category: formData.category,
                    creator_id: user.id
                });
            if (insertError) {
                setError(insertError.message);
            } else {
                setSuccess(true);
                setFormData({
                    title: '',
                    description: '',
                    location: '',
                    event_date: '',
                    category: ''
                });
                setTimeout(() => {
                    if (onEventCreated) onEventCreated();
                }, 1500);
            }
        } catch (err) {
            setError(err.message);
        } finally {
            setLoading(false);
        }
    };
    const categories = ['Sport', 'Musica', 'Arte', 'Cultura', 'Tecnologia', 'Cibo', 'Viaggi', 'Cinema', 'All\'aperto', 'Business'];
    return React.createElement('div', { className: 'create-wrapper' },
        React.createElement('div', { className: 'create-header' },
            React.createElement('h1', { className: 'create-title' }, '‚ú® Crea Nuovo Evento'),
            React.createElement('p', { className: 'create-subtitle' }, 'Condividi un\'esperienza unica con la community')
        ),
        React.createElement('form', { onSubmit: handleSubmit, className: 'create-form' },
            React.createElement('div', { className: 'form-row' },
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { className: 'form-label' },
                        React.createElement('i', { className: 'fas fa-heading' }),
                        ' Titolo evento'
                    ),
                    React.createElement('input', {
                        type: 'text',
                        className: 'form-input',
                        value: formData.title,
                        onChange: (e) => handleChange('title', e.target.value),
                        placeholder: 'Es: Torneo di calcetto',
                        required: true
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { className: 'form-label' },
                        React.createElement('i', { className: 'fas fa-tag' }),
                        ' Categoria'
                    ),
                    React.createElement('select', {
                        className: 'form-input form-select',
                        value: formData.category,
                        onChange: (e) => handleChange('category', e.target.value),
                        required: true
                    },
                        React.createElement('option', { value: '', disabled: true }, 'Seleziona categoria'),
                        categories.map(cat => 
                            React.createElement('option', { key: cat, value: cat }, cat)
                        )
                    )
                )
            ),
            React.createElement('div', { className: 'form-group full-width' },
                React.createElement('label', { className: 'form-label' },
                    React.createElement('i', { className: 'fas fa-align-left' }),
                    ' Descrizione'
                ),
                React.createElement('textarea', {
                    className: 'form-input form-textarea',
                    value: formData.description,
                    onChange: (e) => handleChange('description', e.target.value),
                    placeholder: 'Descrivi il tuo evento...',
                    required: true,
                    rows: 5
                })
            ),
            React.createElement('div', { className: 'form-row' },
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { className: 'form-label' },
                        React.createElement('i', { className: 'fas fa-map-marker-alt' }),
                        ' Luogo'
                    ),
                    React.createElement('input', {
                        type: 'text',
                        className: 'form-input',
                        value: formData.location,
                        onChange: (e) => handleChange('location', e.target.value),
                        placeholder: 'Es: Milano, Piazza Duomo',
                        required: true
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { className: 'form-label' },
                        React.createElement('i', { className: 'fas fa-calendar' }),
                        ' Data e ora'
                    ),
                    React.createElement('input', {
                        type: 'datetime-local',
                        className: 'form-input',
                        value: formData.event_date,
                        onChange: (e) => handleChange('event_date', e.target.value),
                        required: true
                    })
                )
            ),
            error && React.createElement('div', { className: 'error-message' },
                React.createElement('i', { className: 'fas fa-exclamation-triangle' }),
                ' ',
                error
            ),
            success && React.createElement('div', { className: 'success-message' },
                React.createElement('i', { className: 'fas fa-check-circle' }),
                ' Evento creato con successo!'
            ),
            React.createElement('button', {
                type: 'submit',
                className: 'btn-primary',
                disabled: loading
            },
                loading ? [
                    React.createElement('i', { className: 'fas fa-spinner fa-spin', key: 'icon' }),
                    ' Creazione in corso...'
                ] : [
                    React.createElement('i', { className: 'fas fa-plus-circle', key: 'icon' }),
                    ' Crea Evento'
                ]
            )
        )
    );
}
// ProfilePage Component
function ProfilePage({ supabase, user, theme, onToggleTheme }) {
    const [profile, setProfile] = React.useState(null);
    const [myEvents, setMyEvents] = React.useState([]);
    const [stats, setStats] = React.useState({ created: 0, joined: 0 });
    const [loading, setLoading] = React.useState(true);
    React.useEffect(() => {
        loadProfile();
        loadMyEvents();
        loadStats();
    }, []);
    const loadProfile = async () => {
        try {
            const { data } = await supabase
                .from('profiles')
                .select('*')
                .eq('id', user.id)
                .single();
            if (data) {
                setProfile(data);
            }
        } catch (err) {
            console.error('Errore caricamento profilo:', err);
        } finally {
            setLoading(false);
        }
    };
    const loadMyEvents = async () => {
        try {
            const { data } = await supabase
                .from('events')
                .select('*')
                .eq('creator_id', user.id)
                .order('event_date', { ascending: false });
            setMyEvents(data || []);
        } catch (err) {
            console.error('Errore caricamento eventi:', err);
        }
    };
    const loadStats = async () => {
        try {
            const { data: created } = await supabase
                .from('events')
                .select('id')
                .eq('creator_id', user.id);
            const { data: joined } = await supabase
                .from('event_participants')
                .select('event_id')
                .eq('user_id', user.id);
            setStats({
                created: created?.length || 0,
                joined: joined?.length || 0
            });
        } catch (err) {
            console.error('Errore caricamento statistiche:', err);
        }
    };
    if (loading) {
        return React.createElement('div', { className: 'loading' },
            React.createElement('div', { className: 'spinner' }),
            React.createElement('div', { className: 'loading-text' }, 'Caricamento profilo...')
        );
    }
    return React.createElement('div', { className: 'profile-wrapper' },
        React.createElement('div', { className: 'profile-header' },
            React.createElement('div', { className: 'profile-avatar' },
                (profile?.username || user.email)[0].toUpperCase()
            ),
            React.createElement('h2', { className: 'profile-name' }, profile?.username || 'Utente'),
            React.createElement('p', { className: 'profile-email' }, user.email),
            React.createElement('div', { className: 'profile-stats' },
                React.createElement('div', { className: 'stat-item' },
                    React.createElement('div', { className: 'stat-number' }, stats.created),
                    React.createElement('div', { className: 'stat-label' }, 'Eventi Creati')
                ),
                React.createElement('div', { className: 'stat-item' },
                    React.createElement('div', { className: 'stat-number' }, stats.joined),
                    React.createElement('div', { className: 'stat-label' }, 'Partecipazioni')
                )
            )
        ),
        myEvents.length > 0 && React.createElement('div', { className: 'profile-section' },
            React.createElement('h3', { className: 'section-title-small' },
                React.createElement('i', { className: 'fas fa-calendar-check' }),
                ` I miei eventi (${myEvents.length})`
            ),
            React.createElement('div', { className: 'my-events-list' },
                myEvents.slice(0, 5).map(event =>
                    React.createElement('div', { key: event.id, className: 'my-event-item' },
                        React.createElement('div', { className: 'event-info' },
                            React.createElement('div', { className: 'event-title' }, event.title),
                            React.createElement('div', { className: 'event-details' },
                                React.createElement('span', { className: 'event-date' },
                                    React.createElement('i', { className: 'fas fa-calendar' }),
                                    ' ',
                                    new Date(event.event_date).toLocaleDateString('it-IT')
                                ),
                                React.createElement('span', { className: 'event-location' },
                                    React.createElement('i', { className: 'fas fa-map-marker-alt' }),
                                    ' ',
                                    event.location
                                )
                            )
                        )
                    )
                )
            )
        )
    );
}
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialSpot ULTIMATE üöÄ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <meta name="description" content="SocialSpot ULTIMATE - L'app sociale pi√π avanzata del mondo">
    <meta name="keywords" content="social, eventi, networking, AI, innovazione">
    <style>
        :root {
            --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            --danger: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            --dark: #0a0a0a;
            --surface: rgba(26, 26, 26, 0.95);
            --surface-2: rgba(42, 42, 42, 0.95);
            --text: #ffffff;
            --text-muted: #888888;
            --border: rgba(255, 255, 255, 0.1);
            --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --glow: 0 0 40px rgba(102, 126, 234, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--dark);
            color: var(--text);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* üöÄ ULTIMATE ANIMATIONS */
        @keyframes ultimateGlow {
            0%, 100% { filter: brightness(1) saturate(1); }
            50% { filter: brightness(1.2) saturate(1.3); }
        }

        @keyframes ultimatePulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.05) rotate(1deg); }
        }

        @keyframes ultimateSlide {
            0% { transform: translateX(-100%) rotate(-5deg); opacity: 0; }
            100% { transform: translateX(0) rotate(0deg); opacity: 1; }
        }

        @keyframes ultimateFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }

        @keyframes ultimateMatrix {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }

        /* üåü ULTIMATE BACKGROUND */
        .app {
            min-height: 100vh;
            background: 
                radial-gradient(circle at 25% 25%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(249, 115, 22, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(139, 92, 246, 0.05) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
            background-size: 400% 400%;
            animation: ultimateMatrix 20s ease infinite;
            position: relative;
        }

        .app::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23667eea' fill-opacity='0.03'%3E%3Cpath d='M20 20c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10zm10 0c0-5.5-4.5-10-10-10s-10 4.5-10 10 4.5 10 10 10 10-4.5 10-10z'/%3E%3C/g%3E%3C/svg%3E") repeat;
            pointer-events: none;
            z-index: -1;
        }

        /* üöÄ ULTIMATE TOP BAR */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--border);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 999;
            animation: ultimateSlide 0.8s ease-out;
            box-shadow: var(--shadow);
        }

        .logo-ultimate {
            display: flex;
            align-items: center;
            gap: 12px;
            animation: ultimateFloat 3s ease-in-out infinite;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 18px;
            color: white;
            box-shadow: var(--glow);
            animation: ultimateGlow 2s ease-in-out infinite;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 800;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: ultimateGlow 2s ease-in-out infinite;
        }

        .status-indicators {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .handshake-status,
        .handshake-icon {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            border-radius: 14px;
            background: var(--primary);
            color: white;
            box-shadow: var(--glow);
            animation: ultimatePulse 2s ease-in-out infinite;
        }

        .handshake-icon.small {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            margin-right: 8px;
        }

        .handshake-status i,
        .handshake-icon i {
            font-size: 18px;
        }

        .phone-overlay {
            position: absolute;
            right: 6px;
            bottom: 6px;
            font-size: 14px;
            opacity: 0.9;
        }

        .live-status {
            background: var(--success);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 12px;
            font-weight: 700;
            animation: ultimatePulse 2s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.5);
        }

        .ai-status {
            background: var(--secondary);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 12px;
            font-weight: 700;
            animation: ultimatePulse 2.5s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(240, 147, 251, 0.5);
        }

        /* üåü ULTIMATE BOTTOM NAV */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px) saturate(180%);
            border-top: 1px solid var(--border);
            display: flex;
            padding: 15px 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px;
            cursor: pointer;
            color: var(--text-muted);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            border-radius: 15px;
            margin: 0 5px;
        }

        .nav-item.active {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .nav-item:hover {
            color: #667eea;
            transform: translateY(-3px);
            background: rgba(102, 126, 234, 0.05);
        }

        .nav-item i {
            font-size: 24px;
            margin-bottom: 6px;
            transition: all 0.3s ease;
        }

        .nav-item.active i {
            animation: ultimateFloat 2s ease-in-out infinite;
        }

        .nav-item span {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-badge {
            position: absolute;
            top: 8px;
            right: 15px;
            background: var(--secondary);
            color: white;
            border-radius: 15px;
            padding: 4px 8px;
            font-size: 10px;
            font-weight: 700;
            min-width: 20px;
            text-align: center;
            animation: ultimatePulse 1.5s ease-in-out infinite;
            box-shadow: 0 0 15px rgba(240, 147, 251, 0.6);
        }

        /* üöÄ ULTIMATE CONTENT */
        .content {
            padding: 80px 0 110px;
            min-height: 100vh;
        }

        /* üåü ULTIMATE ONBOARDING */
        .onboarding {
            min-height: 100vh;
            background: 
                radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(240, 147, 251, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .onboarding::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                conic-gradient(from 0deg at 50% 50%, 
                rgba(102, 126, 234, 0.1) 0deg, 
                transparent 60deg, 
                rgba(240, 147, 251, 0.1) 120deg, 
                transparent 180deg, 
                rgba(139, 92, 246, 0.1) 240deg, 
                transparent 300deg, 
                rgba(102, 126, 234, 0.1) 360deg);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .onboarding-card {
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(40px) saturate(180%);
            border-radius: 25px;
            padding: 50px;
            text-align: center;
            max-width: 450px;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.5),
                0 0 80px rgba(102, 126, 234, 0.15);
            position: relative;
            z-index: 1;
            animation: ultimateSlide 1s ease-out;
        }

        .ultimate-logo {
            width: 100px;
            height: 100px;
            background: var(--primary);
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 42px;
            font-weight: 900;
            color: white;
            box-shadow: 
                0 15px 35px rgba(102, 126, 234, 0.4),
                0 0 60px rgba(102, 126, 234, 0.2);
            animation: ultimateFloat 3s ease-in-out infinite;
            position: relative;
        }

        .ultimate-logo::before {
            content: '';
            position: absolute;
            inset: -2px;
            background: var(--primary);
            border-radius: 27px;
            z-index: -1;
            opacity: 0.5;
            animation: ultimateGlow 2s ease-in-out infinite;
        }

        .onboarding h1 {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 12px;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .onboarding p {
            font-size: 16px;
            color: var(--text-muted);
            margin-bottom: 35px;
            line-height: 1.6;
        }

        .auth-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 6px;
            margin-bottom: 35px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .auth-tab {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            color: var(--text-muted);
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .auth-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 18px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            color: var(--text);
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 25px rgba(102, 126, 234, 0.2);
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
            font-weight: 400;
        }

        .btn-ultimate {
            width: 100%;
            padding: 20px;
            background: var(--primary);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        }

        .btn-ultimate::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .btn-ultimate:hover::before {
            left: 100%;
        }

        .btn-ultimate:hover {
            transform: translateY(-3px);
            box-shadow: 0 25px 50px rgba(102, 126, 234, 0.4);
        }

        .btn-ultimate:active {
            transform: translateY(-1px);
        }

        .btn-ultimate:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* üöÄ LOCATION AUTOCOMPLETE ULTIMATE */
        .location-input-container {
            position: relative;
        }

        .location-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            max-height: 250px;
            overflow-y: auto;
            z-index: 1000;
            margin-top: 8px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .location-suggestion {
            padding: 15px 20px;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .location-suggestion:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateX(5px);
        }

        .location-suggestion:last-child {
            border-bottom: none;
        }

        .location-suggestion i {
            color: #667eea;
            font-size: 14px;
        }

        /* üåü ULTIMATE FEED */
        .feed {
            padding: 0;
            position: relative;
        }

        .real-time-indicator {
            position: fixed;
            top: 85px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 700;
            z-index: 1000;
            animation: ultimateSlide 0.5s ease-out;
            box-shadow: 0 10px 25px rgba(79, 172, 254, 0.4);
        }

        .feed-header {
            padding: 25px 20px;
            text-align: center;
            background: rgba(26, 26, 26, 0.5);
            backdrop-filter: blur(20px);
            margin: 20px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: ultimateSlide 0.8s ease-out;
        }

        .feed-title {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 10px;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .feed-subtitle {
            color: var(--text-muted);
            font-size: 16px;
        }

        .events-grid {
            display: grid;
            gap: 25px;
            padding: 0 20px;
        }

        .event-card {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            animation: ultimateSlide 0.8s ease-out;
        }

        .event-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary);
            transform: scaleX(0);
            transition: transform 0.3s ease;
            transform-origin: left;
        }

        .event-card:hover::before {
            transform: scaleX(1);
        }

        .event-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .live-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            animation: ultimatePulse 2s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.5);
        }

        .event-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }

        .event-avatar {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 20px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            animation: ultimateFloat 3s ease-in-out infinite;
        }

        .event-info {
            flex: 1;
        }

        .event-creator {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .event-location {
            font-size: 14px;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .event-category {
            background: var(--secondary);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            animation: ultimateGlow 3s ease-in-out infinite;
        }

        .event-content {
            margin: 20px 0;
        }

        .event-title {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .event-description {
            color: var(--text-muted);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .event-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }

        .event-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-muted);
            font-size: 14px;
            font-weight: 500;
        }

        .event-meta-item i {
            color: #667eea;
            width: 16px;
        }

        .participants-count {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #667eea;
            font-weight: 700;
            font-size: 16px;
        }

        .stats-update-indicator {
            background: var(--success);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
            animation: ultimatePulse 1s ease-in-out infinite;
            margin-left: 8px;
        }

        .event-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text);
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            flex: 1;
            justify-content: center;
        }

        .action-btn:hover {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .action-btn.liked {
            border-color: #f5576c;
            color: #f5576c;
            background: rgba(245, 87, 108, 0.1);
        }

        .action-btn.joined {
            background: var(--primary);
            border-color: transparent;
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        /* üöÄ ULTIMATE MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 20px;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(40px);
            border-radius: 25px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            animation: modalSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideUp {
            from { transform: translateY(50px) scale(0.9); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }

        .modal-header {
            padding: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 26px;
            font-weight: 800;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-muted);
            font-size: 20px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: rgba(245, 87, 108, 0.2);
            color: #f5576c;
            transform: scale(1.1);
        }

        .modal-body {
            padding: 30px;
        }

        /* üåü ULTIMATE CHAT */
        .chat-section {
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 30px;
        }

        .chat-header {
            display: flex;
            align-items: center;
            justify-content: between;
            margin-bottom: 20px;
        }

        .chat-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .live-indicator-chat {
            background: var(--success);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: 700;
            animation: ultimatePulse 2s ease-in-out infinite;
        }

        .chat-messages {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .chat-message {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            transition: all 0.3s ease;
            animation: ultimateSlide 0.5s ease-out;
        }

        .chat-message:hover {
            background: rgba(102, 126, 234, 0.15);
            transform: translateX(5px);
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: 700;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .chat-content {
            flex: 1;
        }

        .chat-author {
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 4px;
            color: #667eea;
        }

        .chat-text {
            font-size: 14px;
            color: var(--text);
            line-height: 1.5;
            margin-bottom: 4px;
        }

        .chat-time {
            font-size: 11px;
            color: var(--text-muted);
        }

        .chat-form {
            display: flex;
            gap: 12px;
        }

        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px 20px;
            color: var(--text);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .chat-send {
            background: var(--primary);
            border: none;
            border-radius: 15px;
            padding: 15px 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .chat-send:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        /* üöÄ ULTIMATE CREATE EVENT */
        .create-page {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .create-header {
            text-align: center;
            margin-bottom: 40px;
            animation: ultimateSlide 0.8s ease-out;
        }

        .create-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 12px;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .create-subtitle {
            color: var(--text-muted);
            font-size: 16px;
        }

        .create-form {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            animation: ultimateSlide 1s ease-out;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .form-group-full {
            grid-column: 1 / -1;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
            font-size: 14px;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23667eea' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 15px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 45px;
        }

        /* üåü ULTIMATE PROFILE */
        .profile-page {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .profile-header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            animation: ultimateSlide 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .profile-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary);
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 48px;
            color: white;
            font-weight: 800;
            border: 4px solid rgba(102, 126, 234, 0.3);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
            animation: ultimateFloat 3s ease-in-out infinite;
        }

        .profile-name {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .profile-email {
            color: var(--text-muted);
            font-size: 16px;
            margin-bottom: 25px;
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            min-width: 100px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
        }

        .stat-number {
            font-size: 28px;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 8px;
            animation: ultimateGlow 3s ease-in-out infinite;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .profile-actions {
            display: flex;
            gap: 15px;
            margin: 30px 0;
        }

        .profile-btn {
            flex: 1;
            padding: 18px;
            background: var(--primary);
            border: none;
            border-radius: 15px;
            color: white;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .profile-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .profile-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            box-shadow: none;
        }

        .profile-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        /* üöÄ ULTIMATE SEARCH */
        .search-page {
            padding: 20px;
        }

        .search-bar {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 18px 25px;
            color: var(--text);
            width: 100%;
            margin-bottom: 30px;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .search-bar:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.2);
            background: rgba(26, 26, 26, 0.9);
        }

        .search-bar::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-title i {
            color: #667eea;
        }

        .demo-badge {
            background: var(--secondary);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: 700;
            margin-left: 12px;
            animation: ultimatePulse 2s ease-in-out infinite;
        }

        .people-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .person-card {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            animation: ultimateSlide 0.8s ease-out;
        }

        .person-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .person-card:hover::before {
            transform: scaleX(1);
        }

        .person-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .person-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-weight: 800;
            font-size: 28px;
            border: 3px solid rgba(102, 126, 234, 0.3);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            animation: ultimateFloat 3s ease-in-out infinite;
        }

        .person-name {
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 8px;
        }

        .person-bio {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .person-location {
            font-size: 12px;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .connect-btn {
            background: var(--primary);
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .connect-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        /* üåü ULTIMATE NOTIFICATIONS */
        .notifications-page {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .notification-item {
            display: flex;
            align-items: center;
            padding: 20px;
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            margin-bottom: 15px;
            gap: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            animation: ultimateSlide 0.5s ease-out;
        }

        .notification-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .notification-item.unread {
            border-left: 4px solid #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .notification-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .notification-content {
            flex: 1;
        }

        .notification-text {
            font-size: 15px;
            margin-bottom: 6px;
            line-height: 1.4;
        }

        .notification-time {
            font-size: 12px;
            color: var(--text-muted);
        }

        .notification-action {
            background: var(--primary);
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .notification-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        /* üöÄ ULTIMATE UTILITIES */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            flex-direction: column;
            gap: 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(102, 126, 234, 0.1);
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--text-muted);
            font-weight: 600;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            color: rgba(102, 126, 234, 0.3);
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: 12px;
            color: var(--text);
            font-weight: 700;
        }

        .empty-state p {
            font-size: 16px;
            line-height: 1.5;
        }

        .error-message {
            background: rgba(245, 87, 108, 0.1);
            color: #f5576c;
            padding: 18px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            font-size: 14px;
            border: 1px solid rgba(245, 87, 108, 0.2);
            font-weight: 500;
        }

        .success-message {
            background: rgba(79, 172, 254, 0.1);
            color: #4facfe;
            padding: 18px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            font-size: 14px;
            border: 1px solid rgba(79, 172, 254, 0.2);
            font-weight: 500;
        }

        /* üåü RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .top-bar {
                padding: 12px 15px;
            }

            .logo-text {
                font-size: 20px;
            }

            .status-indicators {
                gap: 6px;
            }

            .live-status, .ai-status {
                padding: 6px 12px;
                font-size: 10px;
            }

            .onboarding-card {
                padding: 30px 25px;
                margin: 10px;
            }

            .ultimate-logo {
                width: 80px;
                height: 80px;
                font-size: 32px;
            }

            .onboarding h1 {
                font-size: 26px;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .profile-stats {
                gap: 20px;
                flex-wrap: wrap;
            }

            .stat-item {
                min-width: 80px;
                padding: 15px;
            }

            .event-actions {
                flex-direction: column;
            }

            .people-grid {
                grid-template-columns: 1fr;
            }

            .profile-actions {
                flex-direction: column;
            }

            .modal-content {
                margin: 10px;
                max-height: 95vh;
            }

            .modal-header, .modal-body {
                padding: 20px;
            }

            .events-grid {
                padding: 0 15px;
            }

            .event-card {
                padding: 20px;
            }

            .real-time-indicator {
                top: 70px;
                right: 15px;
                padding: 8px 12px;
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            .nav-item {
                padding: 8px 4px;
            }

            .nav-item i {
                font-size: 20px;
            }

            .nav-item span {
                font-size: 9px;
            }

            .event-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .event-meta {
                flex-direction: column;
                gap: 10px;
            }

            .form-input, .btn-ultimate {
                padding: 15px;
            }

            .chat-messages {
                padding: 15px;
            }

            .search-bar {
                padding: 15px 20px;
            }
        }

        /* üöÄ ADVANCED EFFECTS */
        .ultimate-glow {
            animation: ultimateGlow 3s ease-in-out infinite;
        }

        .ultimate-pulse {
            animation: ultimatePulse 2s ease-in-out infinite;
        }

        .ultimate-float {
            animation: ultimateFloat 3s ease-in-out infinite;
        }

        /* Scrollbar personalizzata */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(102, 126, 234, 0.7);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        // üöÄ CONFIGURAZIONE SUPABASE ULTIMATE
const SUPABASE_URL = 'https://ctixzrxyyqpumzwmyjyo.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN0aXh6cnh5eXFwdW16d215anlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwMTYzNDQsImV4cCI6MjA3OTU5MjM0NH0.k8HDt4WbU6RwMktolucWc1dekPwfbOk853o7AABRt4o';
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        
        const { useState, useEffect, useCallback, useRef } = React;

        // üåü DATI ULTIMATE
        const CATEGORIES = [
            'Sport', 'Musica', 'Arte', 'Cultura', 'Tecnologia', 
            'Cibo', 'Viaggi', 'Cinema', 'All\'aperto', 'Business'
        ];

        const ITALIAN_CITIES = [
            'Roma, Lazio', 'Milano, Lombardia', 'Napoli, Campania', 'Torino, Piemonte',
            'Palermo, Sicilia', 'Genova, Liguria', 'Bologna, Emilia-Romagna', 'Firenze, Toscana',
            'Bari, Puglia', 'Catania, Sicilia', 'Venezia, Veneto', 'Verona, Veneto',
            'Messina, Sicilia', 'Padova, Veneto', 'Trieste, Friuli-Venezia Giulia', 'Taranto, Puglia',
            'Brescia, Lombardia', 'Prato, Toscana', 'Parma, Emilia-Romagna', 'Modena, Emilia-Romagna',
            'Reggio Calabria, Calabria', 'Reggio Emilia, Emilia-Romagna', 'Perugia, Umbria', 'Livorno, Toscana',
            'Ravenna, Emilia-Romagna', 'Cagliari, Sardegna', 'Foggia, Puglia', 'Rimini, Emilia-Romagna',
            'Salerno, Campania', 'Ferrara, Emilia-Romagna', 'Sassari, Sardegna', 'Latina, Lazio'
        ];
        
const AGE_RANGES = [
    { value: '18-25', label: '18-25 anni' },
    { value: '26-35', label: '26-35 anni' },
    { value: '36-50', label: '36-50 anni' },
    { value: '50+', label: '50+ anni' },
    { value: 'tutte', label: 'Tutte le et√†' }
];

const GENDER_OPTIONS = [
    { value: 'uomo', label: 'Uomo' },
    { value: 'donna', label: 'Donna' },
    { value: 'tutti', label: 'Tutti/Entrambi' }
];

const ITALIAN_CITIES_FULL = [
    'Roma', 'Milano', 'Napoli', 'Torino', 'Palermo', 'Genova', 'Bologna', 'Firenze',
    'Bari', 'Catania', 'Venezia', 'Verona', 'Messina', 'Padova', 'Trieste', 'Taranto',
    'Brescia', 'Prato', 'Parma', 'Modena', 'Reggio Calabria', 'Reggio Emilia'
];

const ITALIAN_REGIONS = [
    'Abruzzo', 'Basilicata', 'Calabria', 'Campania', 'Emilia-Romagna', 'Friuli-Venezia Giulia',
    'Lazio', 'Liguria', 'Lombardia', 'Marche', 'Molise', 'Piemonte', 'Puglia', 'Sardegna',
    'Sicilia', 'Toscana', 'Trentino-Alto Adige', 'Umbria', 'Valle d\'Aosta', 'Veneto'
];

const DEMO_USERS = [

        const DEMO_USERS = [
            { id: 'demo1', username: 'marco_sport', bio: 'üèà Appassionato di calcio e tennis. Organizzo tornei locali!', location: 'Milano, Lombardia' },
            { id: 'demo2', username: 'anna_music', bio: 'üéµ Pianista jazz. Organizzo concerti nei locali storici', location: 'Roma, Lazio' },
            { id: 'demo3', username: 'luca_tech', bio: 'üíª Full-stack developer e maker. AI enthusiast', location: 'Torino, Piemonte' },
            { id: 'demo4', username: 'sara_arte', bio: 'üé® Pittrice contemporanea e curatrice di mostre', location: 'Firenze, Toscana' },
            { id: 'demo5', username: 'giorgio_food', bio: 'üë®‚Äçüç≥ Chef stellato e food blogger', location: 'Bologna, Emilia-Romagna' },
            { id: 'demo6', username: 'elena_travel', bio: '‚úàÔ∏è Travel blogger e fotografa di viaggio', location: 'Venezia, Veneto' },
            { id: 'demo7', username: 'roberto_cinema', bio: 'üé¨ Regista indipendente e sceneggiatore', location: 'Napoli, Campania' },
            { id: 'demo8', username: 'chiara_fitness', bio: 'üí™ Personal trainer certificata e nutrizionista', location: 'Palermo, Sicilia' },
            { id: 'demo9', username: 'alessandro_business', bio: 'üìà Startup founder e business mentor', location: 'Bari, Puglia' },
            { id: 'demo10', username: 'federica_natura', bio: 'üåø Guida naturalistica e organizzatrice di trekking', location: 'Cagliari, Sardegna' }
        ];

        // üöÄ COMPONENT LOCATION AUTOCOMPLETE ULTIMATE
        function LocationInput({ value, onChange, placeholder }) {
            const [suggestions, setSuggestions] = useState([]);
            const [showSuggestions, setShowSuggestions] = useState(false);

            const handleInputChange = (e) => {
                const inputValue = e.target.value;
                onChange(inputValue);
                
                if (inputValue.length > 1) {
                    const filtered = ITALIAN_CITIES.filter(city =>
                        city.toLowerCase().includes(inputValue.toLowerCase())
                    ).slice(0, 8);
                    setSuggestions(filtered);
                    setShowSuggestions(true);
                } else {
                    setShowSuggestions(false);
                }
            };

            const selectSuggestion = (city) => {
                onChange(city);
                setShowSuggestions(false);
            };

            return (
                <div className="location-input-container">
                    <input
                        type="text"
                        className="form-input"
                        placeholder={placeholder}
                        value={value}
                        onChange={handleInputChange}
                        onBlur={() => setTimeout(() => setShowSuggestions(false), 150)}
                        required
                    />
                    {showSuggestions && suggestions.length > 0 && (
                        <div className="location-suggestions">
                            {suggestions.map((city, index) => (
                                <div
                                    key={index}
                                    className="location-suggestion"
                                    onClick={() => selectSuggestion(city)}
                                >
                                    <i className="fas fa-map-marker-alt"></i>
                                    {city}
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }

        // üåü HOOK STATISTICHE REAL-TIME ULTIMATE
        function useRealTimeStats(userId) {
            const [stats, setStats] = useState({ events: 0, followers: 0, following: 0 });
            const [loading, setLoading] = useState(true);

            const calculateStats = useCallback(async () => {
                if (!userId) return;
                
                try {
                    // Eventi creati (REALE)
                    const { data: myEvents } = await supabase
                        .from('events')
                        .select('id')
                        .eq('creator_id', userId);
                    
                    const eventsCount = myEvents?.length || 0;
                    
                    // Followers = Partecipanti unici ai miei eventi (REALE)
                    let followersCount = 0;
                    if (eventsCount > 0) {
                        const { data: participants } = await supabase
                            .from('event_participants')
                            .select('user_id')
                            .in('event_id', myEvents.map(e => e.id));
                        
                        const uniqueParticipants = new Set(participants?.map(p => p.user_id) || []);
                        followersCount = uniqueParticipants.size;
                    }
                    
                    // Following = Eventi a cui partecipo (REALE)
                    const { data: myParticipations } = await supabase
                        .from('event_participants')
                        .select('event_id')
                        .eq('user_id', userId);
                    
                    const followingCount = myParticipations?.length || 0;
                    
                    setStats({
                        events: eventsCount,
                        followers: followersCount,
                        following: followingCount
                    });
                } catch (err) {
                    console.error('‚ùå Errore calcolo statistiche:', err);
                } finally {
                    setLoading(false);
                }
            }, [userId]);

            useEffect(() => {
                calculateStats();
                
                // Real-time updates ULTIMATE
                const eventsChannel = supabase.channel('events_stats_ultimate')
                    .on('postgres_changes', {
                        event: '*',
                        schema: 'public',
                        table: 'events',
                        filter: `creator_id=eq.${userId}`
                    }, calculateStats)
                    .subscribe();

                const participantsChannel = supabase.channel('participants_stats_ultimate')
                    .on('postgres_changes', {
                        event: '*',
                        schema: 'public',
                        table: 'event_participants',
                        filter: `user_id=eq.${userId}`
                    }, calculateStats)
                    .subscribe();

                return () => {
                    supabase.removeChannel(eventsChannel);
                    supabase.removeChannel(participantsChannel);
                };
            }, [calculateStats]);

            return { stats, loading, refresh: calculateStats };
        }

        // üöÄ COMPONENT ONBOARDING ULTIMATE
        function Onboarding({ onComplete }) {
            const [isSignIn, setIsSignIn] = useState(true);
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [username, setUsername] = useState('');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const handleAuth = async (e) => {
                e.preventDefault();
                setLoading(true);
                setError('');
                
                try {
                    let result;
                    if (isSignIn) {
                        result = await supabase.auth.signInWithPassword({ email, password });
                    } else {
                        result = await supabase.auth.signUp({ 
                            email, 
                            password,
                            options: {
                                data: { username: username || email.split('@')[0] }
                            }
                        });
                    }
                    
                    if (result.error) {
                        setError(result.error.message);
                    } else if (result.data.user) {
                        // Crea/aggiorna profilo ULTIMATE
                        await supabase.from('profiles').upsert({
                            id: result.data.user.id,
                            username: username || result.data.user.email.split('@')[0],
                            location: 'Italia',
                            interests: ['Tecnologia', 'Social']
                        }, { onConflict: 'id' });
                        
                        onComplete(result.data.user);
                    }
                } catch (err) {
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="onboarding">
                    <div className="onboarding-card">
                        <div className="ultimate-logo">SS</div>
                        <div className="ultimate-logo">
                            <div className="logo-mark">
                                <i className="fas fa-search"></i>
                                <i className="fas fa-map-marker-alt logo-pin"></i>
                            </div>
                        </div>
                        <h1>SocialSpot ULTIMATE</h1>
                        <p>üöÄ La piattaforma sociale pi√π avanzata del mondo</p>
                        <p>Un nuovo modo di incontrarsi</p>
                        
                        <div className="auth-tabs">
                            <button 
                                className={`auth-tab ${isSignIn ? 'active' : ''}`} 
                                onClick={() => setIsSignIn(true)}
                            >
                                Accedi
                            </button>
                            <button 
                                className={`auth-tab ${!isSignIn ? 'active' : ''}`} 
                                onClick={() => setIsSignIn(false)}
                            >
                                Registrati
                            </button>
                        </div>
                        
                        <form onSubmit={handleAuth}>
                            {!isSignIn && (
                                <div className="form-group">
                                    <input 
                                        type="text" 
                                        className="form-input" 
                                        placeholder="üë§ Username" 
                                        value={username} 
                                        onChange={(e) => setUsername(e.target.value)} 
                                    />
                                </div>
                            )}
                            <div className="form-group">
                                <input 
                                    type="email" 
                                    className="form-input" 
                                    placeholder="üìß Email" 
                                    value={email} 
                                    onChange={(e) => setEmail(e.target.value)} 
                                    required 
                                />
                            </div>
                            <div className="form-group">
                                <input 
                                    type="password" 
                                    className="form-input" 
                                    placeholder="üîí Password" 
                                    value={password} 
                                    onChange={(e) => setPassword(e.target.value)} 
                                    required 
                                />
                            </div>
                            
                            {error && <div className="error-message">{error}</div>}
                            
                            <button type="submit" className="btn-ultimate" disabled={loading}>
                                {loading ? (
                                    <>
                                        <i className="fas fa-spinner fa-spin"></i>
                                        Caricamento...
                                    </>
                                ) : (
                                    <>
                                        <i className={isSignIn ? 'fas fa-sign-in-alt' : 'fas fa-user-plus'}></i>
                                        {isSignIn ? 'Entra nel futuro' : 'Unisciti alla rivoluzione'}
                                    </>
                                )}
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        // üåü COMPONENT CHAT EVENTI ULTIMATE
        function EventChat({ eventId, user, isParticipant }) {
            const [messages, setMessages] = useState([]);
            const [newMessage, setNewMessage] = useState('');
            const [loading, setLoading] = useState(true);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                if (isParticipant) {
                    loadMessages();
                    
                    const channel = supabase.channel(`event_chat_ultimate_${eventId}`)
                        .on('postgres_changes', {
                            event: 'INSERT',
                            schema: 'public',
                            table: 'event_chats',
                            filter: `event_id=eq.${eventId}`
                        }, () => {
                            loadMessages();
                        })
                        .subscribe();

                    return () => supabase.removeChannel(channel);
                }
            }, [eventId, isParticipant]);

            useEffect(scrollToBottom, [messages]);

            const loadMessages = async () => {
                try {
                    const { data, error } = await supabase
                        .from('event_chats')
                        .select(`
                            id,
                            content,
                            created_at,
                            profiles!event_chats_user_id_fkey(username)
                        `)
                        .eq('event_id', eventId)
                        .order('created_at', { ascending: true });

                    if (!error) {
                        setMessages(data || []);
                    }
                } catch (err) {
                    console.error('‚ùå Errore caricamento chat:', err);
                } finally {
                    setLoading(false);
                }
            };

            const sendMessage = async (e) => {
                e.preventDefault();
                if (!newMessage.trim() || !isParticipant) return;

                try {
                    await supabase
                        .from('event_chats')
                        .insert({
                            event_id: eventId,
                            user_id: user.id,
                            content: newMessage.trim()
                        });
                    
                    setNewMessage('');
                } catch (err) {
                    console.error('‚ùå Errore invio messaggio:', err);
                }
            };

            if (!isParticipant) {
                return (
                    <div className="chat-section">
                        <div className="chat-header">
                            <div className="chat-title">
                                <i className="fas fa-lock"></i>
                                Chat Evento
                            </div>
                        </div>
                        <div className="empty-state">
                            <i className="fas fa-lock"></i>
                            <h3>Chat Privata</h3>
                            <p>Partecipa all'evento per accedere alla chat di gruppo</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="chat-section">
                    <div className="chat-header">
                        <div className="chat-title">
                            <i className="fas fa-comments"></i>
                            Chat Evento
                            <div className="live-indicator-chat">LIVE</div>
                            <div className="live-indicator-chat">Chat attiva</div>
                        </div>
                    </div>
                    
                    {loading ? (
                        <div className="loading">
                            <div className="spinner"></div>
                            <div className="loading-text">Caricamento chat...</div>
                        </div>
                    ) : (
                        <>
                            <div className="chat-messages">
                                {messages.length === 0 ? (
                                    <div className="empty-state">
                                        <i className="fas fa-comment-slash"></i>
                                        <h3>Nessun messaggio</h3>
                                        <p>Sii il primo a scrivere nella chat!</p>
                                    </div>
                                ) : (
                                    messages.map(msg => (
                                        <div key={msg.id} className="chat-message">
                                            <div className="chat-avatar">
                                                {msg.profiles?.username?.[0]?.toUpperCase() || 'U'}
                                            </div>
                                            <div className="chat-content">
                                                <div className="chat-author">{msg.profiles?.username || 'Utente'}</div>
                                                <div className="chat-text">{msg.content}</div>
                                                <div className="chat-time">
                                                    {new Date(msg.created_at).toLocaleTimeString('it-IT', {
                                                        hour: '2-digit',
                                                        minute: '2-digit'
                                                    })}
                                                </div>
                                            </div>
                                        </div>
                                    ))
                                )}
                                <div ref={messagesEndRef} />
                            </div>
                            
                            <form onSubmit={sendMessage} className="chat-form">
                                <input
                                    type="text"
                                    className="chat-input"
                                    placeholder="üí¨ Scrivi un messaggio..."
                                    value={newMessage}
                                    onChange={(e) => setNewMessage(e.target.value)}
                                    required
                                />
                                <button type="submit" className="chat-send">
                                    <i className="fas fa-paper-plane"></i>
                                </button>
                            </form>
                        </>
                    )}
                </div>
            );
        }

        // üöÄ COMPONENT MODAL EVENTO ULTIMATE
        function EventModal({ event, onClose, user, onJoinToggle }) {
            const [participants, setParticipants] = useState([]);
            const [isJoined, setIsJoined] = useState(false);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadParticipants();
            }, []);

            const loadParticipants = async () => {
                try {
                    const { data, error } = await supabase
                        .from('event_participants')
                        .select(`
                            user_id,
                            profiles!event_participants_user_id_fkey(username)
                        `)
                        .eq('event_id', event.id);

                    if (!error) {
                        setParticipants(data || []);
                        setIsJoined(data?.some(p => p.user_id === user.id) || false);
                    }
                } catch (err) {
                    console.error('‚ùå Errore caricamento partecipanti:', err);
                } finally {
                    setLoading(false);
                }
            };

            const handleJoinToggle = async () => {
                try {
                    if (isJoined) {
                        await supabase
                            .from('event_participants')
                            .delete()
                            .eq('event_id', event.id)
                            .eq('user_id', user.id);
                    } else {
                        await supabase
                            .from('event_participants')
                            .insert({
                                event_id: event.id,
                                user_id: user.id
                            });
                    }
                    loadParticipants();
                    if (onJoinToggle) onJoinToggle();
                } catch (err) {
                    console.error('‚ùå Errore toggle partecipazione:', err);
                }
            };

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <h2 className="modal-title">{event.title}</h2>
                            <button className="modal-close" onClick={onClose}>
                                <i className="fas fa-times"></i>
                            </button>
                        </div>
                        <div className="modal-body">
                            <div className="event-category ultimate-glow" style={{marginBottom: '20px'}}>
                                {event.category}
                            </div>
                            <p style={{marginBottom: '20px', lineHeight: '1.6', fontSize: '16px'}}>
                                {event.description}
                            </p>
                            
                            <div className="event-meta">
                                <div className="event-meta-item">
                                    <i className="fas fa-calendar"></i>
                                    <span>{new Date(event.event_date).toLocaleString('it-IT')}</span>
                                </div>
                                <div className="event-meta-item">
                                    <i className="fas fa-map-marker-alt"></i>
                                    <span>{event.location}</span>
                                </div>
                                {event.profiles && (
                                    <div className="event-meta-item">
                                        <i className="fas fa-user"></i>
                                        <span>Organizzato da {event.profiles.username}</span>
                                    </div>
                                )}
                            </div>
                            
                            <div className="participants-count">
                                <i className="fas fa-users"></i>
                                <span>{participants.length} partecipanti</span>
                                {participants.length > 0 && <div className="stats-update-indicator">!</div>}
                            </div>
                            
                            <button 
                                className={`btn-ultimate join-btn ${isJoined ? 'secondary' : ''}`}
                                onClick={handleJoinToggle}
                                disabled={loading}
                                style={{marginTop: '25px'}}
                            >
                                <i className={isJoined ? 'fas fa-user-minus' : 'fas fa-user-plus'}></i>
                                {isJoined ? 'Abbandona evento' : 'Partecipa all\'evento'}
                            </button>

                            <EventChat eventId={event.id} user={user} isParticipant={isJoined} />
                        </div>
                    </div>
                </div>
            );
        }

        // üåü COMPONENT FEED ULTIMATE
        function Feed({ user }) {
            const [events, setEvents] = useState([]);
            const [loading, setLoading] = useState(true);
            const [favorites, setFavorites] = useState([]);
            const [participants, setParticipants] = useState({});
            const [selectedEvent, setSelectedEvent] = useState(null);
            const [realTimeUpdate, setRealTimeUpdate] = useState(false);

            useEffect(() => {
                loadEvents();
                loadFavorites();
                loadParticipants();
                
                // Real-time subscriptions ULTIMATE
                const eventsChannel = supabase.channel('events_feed_ultimate')
                    .on('postgres_changes', {
                        event: '*',
                        schema: 'public',
                        table: 'events'
                    }, () => {
                        setRealTimeUpdate(true);
                        loadEvents();
                        setTimeout(() => setRealTimeUpdate(false), 3000);
                    })
                    .subscribe();

                const participantsChannel = supabase.channel('participants_feed_ultimate')
                    .on('postgres_changes', {
                        event: '*',
                        schema: 'public',
                        table: 'event_participants'
                    }, () => {
                        loadParticipants();
                    })
                    .subscribe();

                return () => {
                    supabase.removeChannel(eventsChannel);
                    supabase.removeChannel(participantsChannel);
                };
            }, []);

            const loadEvents = async () => {
                try {
                    const { data, error } = await supabase
                        .from('events')
                        .select(`
                            *,
                            profiles!events_creator_id_fkey(username, location)
                        `)
                        .order('created_at', { ascending: false });
                    
                    if (!error) {
                        setEvents(data || []);
                    }
                } catch (err) {
                    console.error('‚ùå Errore caricamento eventi:', err);
                } finally {
                    setLoading(false);
                }
            };

            const loadFavorites = async () => {
                try {
                    const { data } = await supabase
                        .from('event_favorites')
                        .select('event_id')
                        .eq('user_id', user.id);
                    setFavorites(data ? data.map(f => f.event_id) : []);
                } catch (err) {
                    console.error('‚ùå Errore caricamento favoriti:', err);
                }
            };

            const loadParticipants = async () => {
                try {
                    const { data } = await supabase
                        .from('event_participants')
                        .select('event_id, user_id');
                    
                    const counts = {};
                    const userParticipations = [];
                    
                    (data || []).forEach(p => {
                        counts[p.event_id] = (counts[p.event_id] || 0) + 1;
                        if (p.user_id === user.id) {
                            userParticipations.push(p.event_id);
                        }
                    });
                    
                    setParticipants({ counts, userParticipations });
                } catch (err) {
                    console.error('‚ùå Errore caricamento partecipanti:', err);
                }
            };

            const toggleFavorite = async (eventId) => {
                const isFavorite = favorites.includes(eventId);
                try {
                    if (isFavorite) {
                        await supabase
                            .from('event_favorites')
                            .delete()
                            .eq('event_id', eventId)
                            .eq('user_id', user.id);
                        setFavorites(favorites.filter(id => id !== eventId));
                    } else {
                        await supabase
                            .from('event_favorites')
                            .insert({ event_id: eventId, user_id: user.id });
                        setFavorites([...favorites, eventId]);
                    }
                } catch (err) {
                    console.error('‚ùå Errore toggle favorito:', err);
                }
            };

            const toggleJoin = async (eventId) => {
                const isJoined = participants.userParticipations?.includes(eventId);
                try {
                    if (isJoined) {
                        await supabase
                            .from('event_participants')
                            .delete()
                            .eq('event_id', eventId)
                            .eq('user_id', user.id);
                    } else {
                        await supabase
                            .from('event_participants')
                            .insert({ event_id: eventId, user_id: user.id });
                    }
                    loadParticipants();
                } catch (err) {
                    console.error('‚ùå Errore toggle partecipazione:', err);
                }
            };

            const formatDate = (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString('it-IT', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            };

            if (loading) {
                return (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div className="loading-text">Caricamento eventi ultimate...</div>
                        <div className="loading-text">Caricamento eventi...</div>
                    </div>
                );
            }

            return (
                <div className="feed">
                    {realTimeUpdate && (
                        <div className="real-time-indicator">
                            <i className="fas fa-sync-alt fa-spin"></i> 
                            Aggiornamento real-time ULTIMATE!
                            <i className="fas fa-sync-alt fa-spin"></i>
                            Aggiornamento in tempo reale
                        </div>
                    )}
                    
                    <div className="feed-header">
                        <div style={{ textAlign: 'center', marginBottom: '30px' }}>
                            <i className="fas fa-search-location" style={{ fontSize: '56px', color: '#2563eb', marginBottom: '20px', display: 'block' }}></i>
                            <h1 className="feed-title">Un nuovo modo di incontrarsi</h1>
                            <p className="feed-subtitle">Cerca, trova, partecipa</p>
                        </div>
                        <h1 className="feed-title">Un nuovo modo di incontrarsi</h1>
                        <p className="feed-subtitle">Scopri esperienze incredibili nella tua zona</p>
                    </div>
                    
                    <div className="events-grid">
                        {events.length === 0 ? (
                            <div className="empty-state">
                                <i className="fas fa-rocket"></i>
                                <div className="handshake-icon">
                                    <i className="fas fa-handshake"></i>
                                    <i className="fas fa-mobile-alt phone-overlay"></i>
                                </div>
                                <h3>Nessun evento ancora</h3>
                                <p>Sii il primo a creare un evento ULTIMATE nella tua zona!</p>
                                <p>Cerca, trova, partecipa</p>
                            </div>
                        ) : (
                            events.map(event => (
                                <div key={event.id} className="event-card">
                                    <div className="live-badge">ULTIMATE</div>
                                    <div className="event-header">
                                        <div className="event-avatar ultimate-float">
                                            {event.profiles?.username?.[0]?.toUpperCase() || 'U'}
                                        </div>
                                        <div className="event-info">
                                            <div className="event-creator">{event.profiles?.username || 'Utente'}</div>
                                            <div className="event-location">
                                                <i className="fas fa-map-marker-alt"></i>
                                                {event.location}
                                            </div>
                                        </div>
                                        <div className="event-category ultimate-pulse">{event.category}</div>
                                    </div>
                                    
                                    <div className="event-content">
                                        <h3 className="event-title">{event.title}</h3>
                                        <p className="event-description">{event.description}</p>
                                        
                                        <div className="event-meta">
                                            <div className="event-meta-item">
                                                <i className="fas fa-calendar"></i>
                                                <span>{formatDate(event.event_date)}</span>
                                            </div>
                                            <div className="event-meta-item">
                                                <i className="fas fa-users"></i>
                                                <span>{participants.counts?.[event.id] || 0} partecipanti</span>
                                                {participants.counts?.[event.id] > 0 && (
                                                    <div className="stats-update-indicator">
                                                        {participants.counts[event.id]}
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="event-actions">
                                        <button 
                                            className={`action-btn ${favorites.includes(event.id) ? 'liked' : ''}`}
                                            onClick={() => toggleFavorite(event.id)}
                                        >
                                            <i className={favorites.includes(event.id) ? 'fas fa-heart' : 'far fa-heart'}></i>
                                            Mi piace
                                        </button>
                                        <button 
                                            className={`action-btn ${participants.userParticipations?.includes(event.id) ? 'joined' : ''}`}
                                            onClick={() => toggleJoin(event.id)}
                                        >
                                            <i className="fas fa-user-plus"></i>
                                            {participants.userParticipations?.includes(event.id) ? 'Iscritto ‚úì' : 'Partecipa'}
                                        </button>
                                        <button 
                                            className="action-btn"
                                            onClick={() => setSelectedEvent(event)}
                                        >
                                            <i className="fas fa-info-circle"></i>
                                            Dettagli
                                        </button>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>

                    {selectedEvent && (
                        <EventModal 
                            event={selectedEvent} 
                            onClose={() => setSelectedEvent(null)} 
                            user={user}
                            onJoinToggle={loadParticipants}
                        />
                    )}
                </div>
            );
        }

        // üöÄ COMPONENT SEARCH ULTIMATE
        function Search({ user }) {
            const [searchTerm, setSearchTerm] = useState('');
            const [events, setEvents] = useState([]);
            const [people, setPeople] = useState([]);
            const [filteredEvents, setFilteredEvents] = useState([]);
            const [filteredPeople, setFilteredPeople] = useState([]);
            const [loading, setLoading] = useState(false);
            const [selectedCategory, setSelectedCategory] = useState('');

            useEffect(() => {
                loadData();
            }, []);

            useEffect(() => {
                filterResults();
            }, [searchTerm, selectedCategory, events, people]);

            const loadData = async () => {
                setLoading(true);
                try {
                    const { data: eventsData, error: eventsError } = await supabase
                        .from('events')
                        .select(`
                            *,
                            profiles!events_creator_id_fkey(username)
                        `)
                        .order('event_date', { ascending: true });
                    
                    if (!eventsError) {
                        setEvents(eventsData || []);
                        setFilteredEvents(eventsData || []);
                    }

                    const allPeople = [
                        ...(realUsers || []),
                        ...DEMO_USERS.filter(demo => demo.id !== user.id)
                    ];
                    
                    setPeople(allPeople);
                    setFilteredPeople(allPeople);
                } catch (err) {
                    console.error('‚ùå Errore caricamento dati:', err);
                } finally {
                    setLoading(false);
                }
            };

            const filterResults = () => {
                let filteredEvts = events;
                let filteredPpl = people;
                
                if (searchTerm) {
                    const term = searchTerm.toLowerCase();
                    filteredEvts = filteredEvts.filter(event => 
                        event.title.toLowerCase().includes(term) ||
                        event.description.toLowerCase().includes(term) ||
                        event.location.toLowerCase().includes(term) ||
                        event.profiles?.username.toLowerCase().includes(term)
                    );
                    
                    filteredPpl = filteredPpl.filter(person =>
                        person.username?.toLowerCase().includes(term) ||
                        person.bio?.toLowerCase().includes(term) ||
                        person.location?.toLowerCase().includes(term)
                    );
                }
                
                if (selectedCategory) {
                    filteredEvts = filteredEvts.filter(event => event.category === selectedCategory);
                }
                
                setFilteredEvents(filteredEvts);
                setFilteredPeople(filteredPpl);
            };

            return (
                <div className="search-page">
                    <input
                        type="text"
                        className="search-bar"
                        placeholder="üîç Cerca eventi, luoghi, persone ULTIMATE..."
                        value={searchTerm}
                        onChange={(e) => setSearchTerm(e.target.value)}
                    />
                    
                    <div style={{marginBottom: '30px'}}>
                        <div className="section-title">
                            <i className="fas fa-filter"></i>
                            Filtra per categoria
                        </div>
                        <div style={{display: 'flex', flexWrap: 'wrap', gap: '10px', marginTop: '15px'}}>
                            <button 
                                className={`action-btn ${!selectedCategory ? 'joined' : ''}`}
                                onClick={() => setSelectedCategory('')}
                                style={{fontSize: '14px', padding: '10px 15px'}}
                            >
                                Tutte
                            </button>
                            {CATEGORIES.map(cat => (
                                <button 
                                    key={cat}
                                    className={`action-btn ${selectedCategory === cat ? 'joined' : ''}`}
                                    onClick={() => setSelectedCategory(cat)}
                                    style={{fontSize: '14px', padding: '10px 15px'}}
                                >
                                    {cat}
                                </button>
                            ))}
                        </div>
                    </div>

                    {filteredPeople.length > 0 && (
                        <div className="people-section">
                            <div className="section-title">
                                <i className="fas fa-users"></i>
                                Persone ({filteredPeople.length})
                                <span className="demo-badge">ULTIMATE</span>
                            </div>
                            <div className="people-grid">
                                {filteredPeople.slice(0, 8).map(person => (
                                    <div key={person.id} className="person-card">
                                        <div className="person-avatar ultimate-float">
                                            {person.username?.[0]?.toUpperCase() || 'U'}
                                        </div>
                                        <div className="person-name">{person.username || 'Utente'}</div>
                                        <div className="person-bio">{person.bio || 'Membro della community'}</div>
                                        <div className="person-location">
                                            <i className="fas fa-map-marker-alt"></i>
                                            {person.location || 'Italia'}
                                        </div>
                                        <button className="connect-btn">
                                            <i className="fas fa-user-plus"></i>
                                            Connetti
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {filteredEvents.length > 0 && (
                        <div style={{marginTop: '40px'}}>
                            <div className="section-title">
                                <i className="fas fa-calendar-alt"></i>
                                Eventi ({filteredEvents.length})
                                <span className="demo-badge">LIVE</span>
                                <span className="demo-badge">In evidenza</span>
                            </div>
                            <div className="events-grid">
                                {filteredEvents.slice(0, 6).map(event => (
                                    <div key={event.id} className="event-card">
                                        <div className="live-badge">TROVATO</div>
                                        <div className="event-header">
                                            <div className="event-avatar">
                                                {event.profiles?.username?.[0]?.toUpperCase() || 'U'}
                                            </div>
                                            <div className="event-info">
                                                <div className="event-creator">{event.profiles?.username || 'Utente'}</div>
                                                <div className="event-location">
                                                    <i className="fas fa-map-marker-alt"></i>
                                                    {event.location}
                                                </div>
                                            </div>
                                            <div className="event-category">{event.category}</div>
                                        </div>
                                        <div className="event-content">
                                            <h3 className="event-title">{event.title}</h3>
                                            <p className="event-description">{event.description}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {loading && (
                        <div className="loading">
                            <div className="spinner"></div>
                            <div className="loading-text">Ricerca ULTIMATE in corso...</div>
                        </div>
                    )}
                </div>
            );
        }

        // üåü COMPONENT CREATE EVENT ULTIMATE
        function CreateEvent({ user, onEventCreated }) {
            const [title, setTitle] = useState('');
            const [description, setDescription] = useState('');
            const [location, setLocation] = useState('');
            const [date, setDate] = useState('');
            const [category, setCategory] = useState('');
            const [preferredAge, setPreferredAge] = useState('tutte');
            const [preferredGender, setPreferredGender] = useState('tutti');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            const [success, setSuccess] = useState(false);

            const handleCreate = async (e) => {
                e.preventDefault();
                setLoading(true);
                setError('');
                setSuccess(false);
                
                try {
                    const { error } = await supabase.from('events').insert({
                        title,
                        description,
                        location,
                        event_date: date,
                        category,
                        preferred_age_range: preferredAge,
                        preferred_gender: preferredGender,
                        creator_id: user.id
                    });
                    
                    if (error) {
                        setError(error.message);
                    } else {
                        setTitle('');
                        setDescription('');
                        setLocation('');
                        setDate('');
                        setCategory('');
                        setSuccess(true);
                        
                        setTimeout(() => {
                            setSuccess(false);
                            if (onEventCreated) onEventCreated();
                        }, 2000);
                    }
                } catch (err) {
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="create-page">
                    <div className="create-header">
                        <h1 className="create-title">üöÄ Crea Evento ULTIMATE</h1>
                        <p className="create-subtitle">Condividi un'esperienza incredibile con la community</p>
                    </div>
                    
                    <form onSubmit={handleCreate} className="create-form">
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">
                                    <i className="fas fa-calendar"></i>
                                    Titolo evento
                                </label>
                                <input 
                                    type="text" 
                                    className="form-input"
                                    value={title} 
                                    onChange={(e) => setTitle(e.target.value)} 
                                    required 
                                    placeholder="üéØ Inserisci un titolo accattivante" 
                                />
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">
                                    <i className="fas fa-tag"></i>
                                    Categoria
                                </label>
                                <select 
                                    className="form-input form-select"
                                    value={category} 
                                    onChange={(e) => setCategory(e.target.value)} 
                                    required
                                >
                                    <option value="" disabled>üéØ Seleziona categoria</option>
                                    {CATEGORIES.map((cat) => (
                                        <option key={cat} value={cat}>{cat}</option>
                                    ))}
                                </select>
                            </div>
                        </div>
                        
                        <div className="form-group form-group-full">
                            <label className="form-label">
                                <i className="fas fa-align-left"></i>
                                Descrizione
                            </label>
                            <textarea 
                                className="form-input form-textarea"
                                value={description} 
                                onChange={(e) => setDescription(e.target.value)} 
                                required 
                                placeholder="üìù Descrivi il tuo evento in dettaglio..."
                            />
                        </div>
                        
                        <div className="form-row">
                            <div className="form-group">
                                <label className="form-label">
                                    <i className="fas fa-map-marker-alt"></i>
                                    Luogo
                                </label>
                                <LocationInput
                                    value={location}
                                    onChange={setLocation}
                                    placeholder="üìç Seleziona una location"
                                />
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">
                                    <i className="fas fa-clock"></i>
                                    Data e ora
                                </label>
                                <input 
                                    type="datetime-local" 
                                    className="form-input"
                                    value={date} 
                                    onChange={(e) => setDate(e.target.value)} 
                                    required 
                                />
                            </div>
                        </div>

                        {/* NUOVA SEZIONE: PREFERENZE PARTECIPANTI */}
                        <div style={{
                            padding: '25px',
                            background: 'rgba(37, 99, 235, 0.05)',
                            borderRadius: '20px',
                            marginBottom: '25px',
                            border: '1px solid rgba(37, 99, 235, 0.2)'
                        }}>
                            <h4 style={{ 
                                marginBottom: '20px', 
                                fontWeight: '700', 
                                color: '#2563eb',
                                display: 'flex',
                                alignItems: 'center',
                                gap: '10px'
                            }}>
                                <i className="fas fa-users"></i> 
                                Preferenze partecipanti (opzionale)
                            </h4>
                            
                            <div className="form-row">
                                <div className="form-group">
                                    <label className="form-label">
                                        <i className="fas fa-birthday-cake"></i>
                                        Fascia d'et√† preferita
                                    </label>
                                    <select
                                        className="form-input form-select"
                                        value={preferredAge}
                                        onChange={(e) => setPreferredAge(e.target.value)}
                                    >
                                        {AGE_RANGES.map(range => (
                                            <option key={range.value} value={range.value}>
                                                {range.label}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">
                                        <i className="fas fa-venus-mars"></i>
                                        Sesso partecipanti
                                    </label>
                                    <select
                                        className="form-input form-select"
                                        value={preferredGender}
                                        onChange={(e) => setPreferredGender(e.target.value)}
                                    >
                                        {GENDER_OPTIONS.map(gender => (
                                            <option key={gender.value} value={gender.value}>
                                                {gender.label}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                            </div>
                            
                            <p style={{
                                fontSize: '13px',
                                color: '#6b7280',
                                marginTop: '15px',
                                fontStyle: 'italic'
                            }}>
                                üí° Queste preferenze aiutano a trovare partecipanti pi√π in linea con l'evento
                            </p>
                        </div>
                        
                        {error && <div className="error-message">‚ùå {error}</div>}
                        {success && <div className="success-message">‚úÖ Evento creato con successo! üéâ</div>}
                        
                        <button type="submit" className="btn-ultimate" disabled={loading}>
                            {loading ? (
                                <>
                                    <i className="fas fa-spinner fa-spin"></i>
                                    Creazione in corso...
                                </>
                            ) : (
                                <>
                                    <i className="fas fa-rocket"></i>
                                    Crea evento ULTIMATE
                                    <div className="handshake-icon small">
                                        <i className="fas fa-handshake"></i>
                                        <i className="fas fa-mobile-alt phone-overlay"></i>
                                    </div>
                                    Crea evento
                                </>
                            )}
                        </button>
                    </form>
                </div>
            );
        }

        // üöÄ COMPONENT PROFILE ULTIMATE
        function Profile({ user, onSignOut }) {
            const { stats, loading: statsLoading } = useRealTimeStats(user.id);
            const [profile, setProfile] = useState({ username: '', location: '', interests: [] });
            const [myEvents, setMyEvents] = useState([]);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadProfile();
                loadMyEvents();
            }, []);

            const loadProfile = async () => {
                try {
                    const { data, error } = await supabase
                        .from('profiles')
                        .select('*')
                        .eq('id', user.id)
                        .single();
                    
                    if (data) {
                        setProfile(data);
                    }
                } catch (err) {
                    console.error('‚ùå Errore caricamento profilo:', err);
                } finally {
                    setLoading(false);
                }
            };

            const loadMyEvents = async () => {
                try {
                    const { data, error } = await supabase
                        .from('events')
                        .select('*')
                        .eq('creator_id', user.id)
                        .order('event_date', { ascending: false });
                    
                    if (!error) {
                        setMyEvents(data || []);
                    }
                } catch (err) {
                    console.error('‚ùå Errore caricamento eventi:', err);
                }
            };

            if (loading) {
                return (
                    <div className="loading">
                        <div className="spinner"></div>
                        <div className="loading-text">Caricamento profilo ULTIMATE...</div>
                    </div>
                );
            }

            return (
                <div className="profile-page">
                    <div className="profile-header">
                        <div className="profile-avatar-large">
                            {profile.username?.[0]?.toUpperCase() || user.email[0].toUpperCase()}
                        </div>
                        <div className="profile-name">{profile.username || 'Utente ULTIMATE'}</div>
                        <div className="profile-email">{user.email}</div>
                        
                        <div className="profile-stats">
                            <div className="stat-item">
                                <div className="stat-number ultimate-glow">
                                    {statsLoading ? '...' : stats.events}
                                </div>
                                <div className="stat-label">Eventi Creati</div>
                            </div>
                            <div className="stat-item">
                                <div className="stat-number ultimate-glow">
                                    {statsLoading ? '...' : stats.followers}
                                </div>
                                <div className="stat-label">Followers</div>
                            </div>
                            <div className="stat-item">
                                <div className="stat-number ultimate-glow">
                                    {statsLoading ? '...' : stats.following}
                                </div>
                                <div className="stat-label">Following</div>
                            </div>
                        </div>
                        
                        <div className="profile-actions">
                            <button className="profile-btn">
                                <i className="fas fa-edit"></i>
                                Modifica Profilo
                            </button>
                            <button className="profile-btn secondary" onClick={onSignOut}>
                                <i className="fas fa-sign-out-alt"></i>
                                Logout
                            </button>
                        </div>
                    </div>

                    {myEvents.length > 0 && (
                        <div style={{
                            background: 'rgba(26, 26, 26, 0.8)',
                            backdropFilter: 'blur(20px)',
                            borderRadius: '25px',
                            padding: '30px',
                            border: '1px solid rgba(255, 255, 255, 0.1)',
                            marginBottom: '25px'
                        }}>
                            <div className="section-title">
                                <i className="fas fa-calendar-check"></i>
                                I miei eventi ({myEvents.length})
                                <span className="demo-badge">REAL</span>
                            </div>
                            <div className="events-grid">
                                {myEvents.slice(0, 3).map(event => (
                                    <div key={event.id} className="event-card">
                                        <div className="live-badge">MIO</div>
                                        <div className="event-content">
                                            <h3 className="event-title">{event.title}</h3>
                                            <p className="event-description">{event.description}</p>
                                            <div className="event-meta">
                                                <div className="event-meta-item">
                                                    <i className="fas fa-calendar"></i>
                                                    <span>{new Date(event.event_date).toLocaleDateString('it-IT')}</span>
                                                </div>
                                                <div className="event-meta-item">
                                                    <i className="fas fa-map-marker-alt"></i>
                                                    <span>{event.location}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // üåü COMPONENT NOTIFICHE ULTIMATE
        function Notifications({ user }) {
            const [notifications, setNotifications] = useState([
                {
                    id: 1,
                    type: 'join',
                    user: 'marco_sport',
                    text: 'si √® iscritto al tuo evento "Torneo di calcetto"',
                    time: '2 minuti fa',
                    unread: true
                },
                {
                    id: 2,
                    type: 'like',
                    user: 'anna_music',
                    text: 'ha messo mi piace al tuo evento "Concerto Jazz"',
                    time: '15 minuti fa',
                    unread: true
                },
                {
                    id: 3,
                    type: 'comment',
                    user: 'luca_tech',
                    text: 'ha commentato: "Sar√≤ presente!"',
                    time: '1 ora fa',
                    unread: false
                },
                {
                    id: 4,
                    type: 'follow',
                    user: 'sara_arte',
                    text: 'ha iniziato a seguirti',
                    time: '2 ore fa',
                    unread: false
                }
            ]);

            const markAsRead = (id) => {
                setNotifications(notifications.map(notif => 
                    notif.id === id ? { ...notif, unread: false } : notif
                ));
            };

            return (
                <div className="notifications-page">
                    <div className="section-title">
                        <i className="fas fa-bell"></i>
                        Notifiche ULTIMATE
                        <span className="demo-badge">LIVE</span>
                        <span className="demo-badge">Aggiornate</span>
                    </div>
                    
                    {notifications.map(notif => (
                        <div 
                            key={notif.id} 
                            className={`notification-item ${notif.unread ? 'unread' : ''}`}
                        >
                            <div className="notification-avatar ultimate-float">
                                {notif.user[0].toUpperCase()}
                            </div>
                            <div className="notification-content">
                                <div className="notification-text">
                                    <strong>{notif.user}</strong> {notif.text}
                                </div>
                                <div className="notification-time">{notif.time}</div>
                            </div>
                            {notif.unread && (
                                <button 
                                    className="notification-action"
                                    onClick={() => markAsRead(notif.id)}
                                >
                                    Segna come letto
                                </button>
                            )}
                        </div>
                    ))}
                </div>
            );
        }

        // üöÄ COMPONENT PRINCIPALE APP ULTIMATE
        function App() {
            const [user, setUser] = useState(null);
            const [currentPage, setCurrentPage] = useState('feed');
            const [loading, setLoading] = useState(true);
            const [notifications] = useState(3);

            useEffect(() => {
                // Controlla sessione esistente
                supabase.auth.getSession().then(({ data: { session } }) => {
                    setUser(session?.user ?? null);
                    setLoading(false);
                });

                // Ascolta cambiamenti auth
                const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
                    setUser(session?.user ?? null);
                });

                return () => subscription.unsubscribe();
            }, []);

            const handleSignOut = async () => {
                await supabase.auth.signOut();
                setUser(null);
                setCurrentPage('feed');
            };

            if (loading) {
                return (
                    <div className="loading" style={{minHeight: '100vh'}}>
                        <div className="spinner"></div>
                        <div className="loading-text">Inizializzazione ULTIMATE...</div>
                    </div>
                );
            }

            if (!user) {
                return <Onboarding onComplete={setUser} />;
            }

            return (
                <div className="app">
                    {/* Top Bar ULTIMATE */}
                    <div className="top-bar">
                        <div className="logo-ultimate">
                            <div className="logo-icon">SS</div>
                            <div className="logo-icon">
                                <div className="logo-mark">
                                    <i className="fas fa-search"></i>
                                    <i className="fas fa-map-marker-alt logo-pin"></i>
                                </div>
                            </div>
                            <div className="logo-text">SocialSpot</div>
                        </div>
                        <div className="status-indicators">
                            <div className="live-status">LIVE</div>
                            <div className="ai-status">AI POWERED</div>
                            <div className="handshake-status">
                                <i className="fas fa-handshake"></i>
                                <i className="fas fa-mobile-alt phone-overlay"></i>
                            </div>
                        </div>
                    </div>

                    {/* Content ULTIMATE */}
                    <div className="content">
                        {currentPage === 'feed' && <Feed user={user} />}
                        {currentPage === 'search' && <Search user={user} />}
                        {currentPage === 'create' && <CreateEvent user={user} onEventCreated={() => setCurrentPage('feed')} />}
                        {currentPage === 'notifications' && <Notifications user={user} />}
                        {currentPage === 'profile' && <Profile user={user} onSignOut={handleSignOut} />}
                    </div>

                    {/* Bottom Navigation ULTIMATE */}
                    <div className="bottom-nav">
                        <div 
                            className={`nav-item ${currentPage === 'feed' ? 'active' : ''}`}
                            onClick={() => setCurrentPage('feed')}
                        >
                            <i className="fas fa-home"></i>
                            <span>Feed</span>
                        </div>
                        <div 
                            className={`nav-item ${currentPage === 'search' ? 'active' : ''}`}
                            onClick={() => setCurrentPage('search')}
                        >
                            <i className="fas fa-search"></i>
                            <span>Cerca</span>
                        </div>
                        <div 
                            className={`nav-item ${currentPage === 'create' ? 'active' : ''}`}
                            onClick={() => setCurrentPage('create')}
                        >
                            <i className="fas fa-plus-circle"></i>
                            <span>Crea</span>
                        </div>
                        <div 
                            className={`nav-item ${currentPage === 'notifications' ? 'active' : ''}`}
                            onClick={() => setCurrentPage('notifications')}
                        >
                            <i className="fas fa-bell"></i>
                            <span>Notifiche</span>
                            {notifications > 0 && <div className="nav-badge">{notifications}</div>}
                        </div>
                        <div 
                            className={`nav-item ${currentPage === 'profile' ? 'active' : ''}`}
                            onClick={() => setCurrentPage('profile')}
                        >
                            <i className="fas fa-user"></i>
                            <span>Profilo</span>
                        </div>
                    </div>
                </div>
            );
        }

        // üöÄ RENDER ULTIMATE
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
// API placeholder per SocialSpot
export default function handler(req, res) {
  res.status(200).json({ message: 'Benvenuto nell‚ÄôAPI SocialSpot!' });
}
{
  "name": "SocialSpot",
  "short_name": "SocialSpot",
  "description": "Connetti, Crea, Condividi eventi",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff", 
  "theme_color": "#2563eb",
  "orientation":  "portrait-primary",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ]
}
{
  "dependencies": {
    "@fortawesome/fontawesome-free": "6.7.2",
    "@fortawesome/fontawesome-svg-core": "6.7.2",
    "@fortawesome/free-brands-svg-icons": "6.7.2",
    "@fortawesome/free-regular-svg-icons": "6.7.2",
    "@fortawesome/free-solid-svg-icons": "6.7.2",
    "@types/prismjs": "1.26.5",
    "autoprefixer": "10.4.21",
    "http-server": "14.1.1",
    "image-size": "2.0.2",
    "postcss": "8.5.6",
    "pptxgenjs": "4.0.0",
    "prismjs": "1.30.0",
    "sharp": "0.34.1",
    "tailwindcss": "4.1.10",
    "ts-node": "10.9.2",
    "typescript": "5.8.3"
  }
}
{
  "dependencies": {
    "@fortawesome/fontawesome-free": "6.7.2",
    "@fortawesome/fontawesome-svg-core": "6.7.2",
    "@fortawesome/free-brands-svg-icons": "6.7.2",
    "@fortawesome/free-regular-svg-icons": "6.7.2",
    "@fortawesome/free-solid-svg-icons": "6.7.2",
    "@types/prismjs": "1.26.5",
    "autoprefixer": "10.4.21",
    "http-server": "14.1.1",
    "image-size": "2.0.2",
    "postcss": "8.5.6",
    "pptxgenjs": "4.0.0",
    "prismjs": "1.30.0",
    "sharp": "0.34.1",
    "tailwindcss": "4.1.10",
    "ts-node": "10.9.2",
    "typescript": "5.8.3"
  }
}
/*
 * SocialSpot - Advanced CSS Framework
 * Modern design system con micro-animazioni, glassmorphism e design responsive premium
 */
/* ===== CSS CUSTOM PROPERTIES ===== */
:root {
    /* Enhanced Color Palette */
    --color-primary: #2563eb;
    --color-primary-50: #eff6ff;
    --color-primary-100: #dbeafe;
    --color-primary-200: #bfdbfe;
    --color-primary-300: #93c5fd;
    --color-primary-400: #60a5fa;
    --color-primary-500: #3b82f6;
    --color-primary-600: #2563eb;
    --color-primary-700: #1d4ed8;
    --color-primary-800: #1e40af;
    --color-primary-900: #1e3a8a;
    --color-secondary: #f97316;
    --color-secondary-50: #fff7ed;
    --color-secondary-100: #ffedd5;
    --color-secondary-200: #fed7aa;
    --color-secondary-300: #fdba74;
    --color-secondary-400: #fb923c;
    --color-secondary-500: #f97316;
    --color-secondary-600: #ea580c;
    --color-secondary-700: #c2410c;
    --color-secondary-800: #9a3412;
    --color-secondary-900: #7c2d12;
    /* Semantic Colors */
    --color-success: #10b981;
    --color-success-50: #ecfdf5;
    --color-success-500: #10b981;
    --color-success-600: #059669;
    --color-warning: #f59e0b;
    --color-warning-50: #fffbeb;
    --color-warning-500: #f59e0b;
    --color-warning-600: #d97706;
    --color-error: #ef4444;
    --color-error-50: #fef2f2;
    --color-error-500: #ef4444;
    --color-error-600: #dc2626;
    /* Enhanced Neutrals */
    --color-gray-50: #f9fafb;
    --color-gray-100: #f3f4f6;
    --color-gray-200: #e5e7eb;
    --color-gray-300: #d1d5db;
    --color-gray-400: #9ca3af;
    --color-gray-500: #6b7280;
    --color-gray-600: #4b5563;
    --color-gray-700: #374151;
    --color-gray-800: #1f2937;
    --color-gray-900: #111827;
    --color-gray-950: #030712;
    /* Theme Colors - Light */
    --color-bg: var(--color-gray-50);
    --color-surface: #ffffff;
    --color-surface-elevated: #ffffff;
    --color-surface-hover: var(--color-gray-100);
    --color-text: var(--color-gray-900);
    --color-text-secondary: var(--color-gray-700);
    --color-text-muted: var(--color-gray-500);
    --color-border: var(--color-gray-200);
    --color-border-light: var(--color-gray-100);
    /* Enhanced Shadows */
    --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
    /* Glassmorphism */
    --glass-bg: rgba(255, 255, 255, 0.8);
    --glass-border: rgba(255, 255, 255, 0.2);
    --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    /* Spacing Scale */
    --space-px: 1px;
    --space-0: 0px;
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;
    --space-12: 3rem;
    --space-16: 4rem;
    --space-20: 5rem;
    --space-24: 6rem;
    --space-32: 8rem;
    /* Border Radius */
    --radius-none: 0px;
    --radius-sm: 0.125rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-2xl: 1rem;
    --radius-3xl: 1.5rem;
    --radius-full: 9999px;
    /* Typography */
    --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-family-display: 'Plus Jakarta Sans', var(--font-family-primary);
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 1.875rem;
    --font-size-4xl: 2.25rem;
    --font-size-5xl: 3rem;
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --font-weight-extrabold: 800;
    --font-weight-black: 900;
    --line-height-tight: 1.25;
    --line-height-snug: 1.375;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.625;
    --line-height-loose: 2;
    /* Transitions & Animations */
    --transition-none: none;
    --transition-all: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-colors: color 150ms cubic-bezier(0.4, 0, 0.2, 1), background-color 150ms cubic-bezier(0.4, 0, 0.2, 1), border-color 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-transform: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-opacity: opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-shadow: box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --ease-linear: cubic-bezier(0, 0, 1, 1);
    --ease-in: cubic-bezier(0.4, 0, 1, 1);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-back: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    /* Z-Index Scale */
    --z-0: 0;
    --z-10: 10;
    --z-20: 20;
    --z-30: 30;
    --z-40: 40;
    --z-50: 50;
    --z-header: 1000;
    --z-dropdown: 1100;
    --z-modal: 1200;
    --z-popover: 1300;
    --z-tooltip: 1400;
    --z-toast: 1500;
}
/* Dark Theme */
body[data-theme='dark'] {
    --color-bg: var(--color-gray-950);
    --color-surface: var(--color-gray-900);
    --color-surface-elevated: var(--color-gray-800);
    --color-surface-hover: var(--color-gray-800);
    --color-text: var(--color-gray-100);
    --color-text-secondary: var(--color-gray-300);
    --color-text-muted: var(--color-gray-400);
    --color-border: var(--color-gray-700);
    --color-border-light: var(--color-gray-800);
    --glass-bg: rgba(31, 41, 55, 0.8);
    --glass-border: rgba(75, 85, 99, 0.3);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
    --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.4), 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
    --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
}
/* ===== RESET & BASE ===== */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}
html {
    scroll-behavior: smooth;
    font-size: 16px;
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}
body {
    font-family: var(--font-family-primary);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-normal);
    line-height: var(--line-height-normal);
    color: var(--color-text);
    background-color: var(--color-bg);
    transition: var(--transition-colors);
    min-height: 100vh;
    overflow-x: hidden;
}
/* ===== ENHANCED LOADER ===== */
.loader-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: linear-gradient(135deg, var(--color-primary-600) 0%, var(--color-secondary-500) 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeOut 0.8s ease-out 2.5s forwards;
}
.loader-content {
    text-align: center;
    color: white;
    transform: translateY(-20px);
    animation: slideUp 0.8s ease-out 0.3s forwards;
    opacity: 0;
}
.app-logo-loading {
    margin-bottom: var(--space-8);
}
.logo-icon-loading {
    position: relative;
    width: 80px;
    height: 80px;
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 2px solid var(--glass-border);
    border-radius: var(--radius-2xl);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--space-6);
    box-shadow: var(--glass-shadow);
    animation: logoFloat 3s ease-in-out infinite;
}
.logo-text-loading {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-extrabold);
    font-family: var(--font-family-display);
    color: white;
    z-index: 2;
    position: relative;
}
.loading-rings {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.ring {
    position: absolute;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    animation: pulseRing 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
}
.ring-1 {
    width: 60px;
    height: 60px;
    margin: -30px 0 0 -30px;
    animation-delay: 0s;
}
.ring-2 {
    width: 90px;
    height: 90px;
    margin: -45px 0 0 -45px;
    animation-delay: 0.4s;
}
.ring-3 {
    width: 120px;
    height: 120px;
    margin: -60px 0 0 -60px;
    animation-delay: 0.8s;
}
.brand-name-loading {
    font-family: var(--font-family-display);
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-black);
    color: white;
    margin-bottom: var(--space-3);
    letter-spacing: -0.02em;
}
.brand-tagline {
    font-size: var(--font-size-lg);
    color: rgba(255, 255, 255, 0.9);
    font-weight: var(--font-weight-medium);
    letter-spacing: 0.05em;
    margin-bottom: var(--space-8);
}
.loading-progress {
    width: 200px;
    margin: 0 auto;
}
.progress-bar-loading {
    width: 0;
    height: 4px;
    background: linear-gradient(90deg, rgba(255,255,255,0.8), rgba(255,255,255,1));
    border-radius: var(--radius-full);
    margin-bottom: var(--space-4);
    animation: loadProgress 2.5s ease-in-out infinite;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
}
.loading-text {
    font-size: var(--font-size-sm);
    color: rgba(255, 255, 255, 0.8);
    font-weight: var(--font-weight-medium);
    animation: textPulse 1.5s ease-in-out infinite;
}
/* Loader Animations */
@keyframes fadeOut {
    to {
        opacity: 0;
        visibility: hidden;
        transform: scale(1.1);
    }
}
@keyframes slideUp {
    to {
        transform: translateY(0);
        opacity: 1;
    }
}
@keyframes logoFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}
@keyframes pulseRing {
    0% {
        transform: scale(0.33);
        opacity: 1;
    }
    80%, 100% {
        transform: scale(1);
        opacity: 0;
    }
}
@keyframes loadProgress {
    0% { width: 0%; }
    70% { width: 85%; }
    100% { width: 100%; }
}
@keyframes textPulse {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 1; }
}
/* ===== BACKGROUND PATTERNS ===== */
.bg-pattern {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    opacity: 0.02;
    background-image: 
        radial-gradient(circle at 20% 50%, var(--color-primary-500) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, var(--color-secondary-500) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, var(--color-primary-400) 0%, transparent 50%);
    animation: patternFloat 20s ease-in-out infinite;
}
.bg-gradient {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background: 
        radial-gradient(circle at 25% 25%, rgba(37, 99, 235, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 75% 75%, rgba(249, 115, 22, 0.05) 0%, transparent 50%);
}
@keyframes patternFloat {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(1deg); }
}
/* ===== ENHANCED HEADER ===== */
.main-header {
    position: sticky;
    top: 0;
    z-index: var(--z-header);
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--glass-border);
    padding: var(--space-4) 0;
    transition: var(--transition-all);
    box-shadow: var(--shadow-sm);
}
.header-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 var(--space-6);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.hamburger-menu {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    background: none;
    border: none;
    border-radius: var(--radius-xl);
    color: var(--color-text);
    cursor: pointer;
    transition: var(--transition-all);
    position: relative;
    overflow: hidden;
}
.hamburger-menu::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--color-surface-hover);
    opacity: 0;
    transition: var(--transition-opacity);
    border-radius: var(--radius-xl);
}
.hamburger-menu:hover::before {
    opacity: 1;
}
.hamburger-menu:hover {
    color: var(--color-primary-600);
    transform: scale(1.05);
}
.hamburger-menu i {
    font-size: var(--font-size-lg);
    z-index: 1;
    position: relative;
}
.app-logo-header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    flex: 1;
    justify-content: center;
}
.app-logo-header .logo-icon {
    width: 40px;
   height: 40px;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   border-radius: var(--radius-xl);
   display: flex;
   align-items: center;
   justify-content: center;
   color: white;
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-bold);
   font-family: var(--font-family-display);
   box-shadow: var(--shadow-md);
   position: relative;
   overflow: hidden;
}
.app-logo-header .logo-icon::before {
   content: '';
   position: absolute;
   top: -50%;
   left: -50%;
   width: 200%;
   height: 200%;
   background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
   transform: rotate(45deg);
   animation: logoShine 3s ease-in-out infinite;
}
.app-name {
   font-family: var(--font-family-display);
   font-size: var(--font-size-xl);
   font-weight: var(--font-weight-bold);
   color: var(--color-text);
   letter-spacing: -0.02em;
}
@keyframes logoShine {
   0% { transform: translateX(-100%) rotate(45deg); }
   50% { transform: translateX(100%) rotate(45deg); }
   100% { transform: translateX(100%) rotate(45deg); }
}
.header-nav {
   display: none;
   gap: var(--space-2);
}
.nav-btn {
   display: flex;
   align-items: center;
   gap: var(--space-2);
   padding: var(--space-3) var(--space-4);
   border-radius: var(--radius-xl);
   background: none;
   border: none;
   color: var(--color-text-muted);
   font-weight: var(--font-weight-medium);
   font-size: var(--font-size-sm);
   cursor: pointer;
   transition: var(--transition-all);
   position: relative;
   overflow: hidden;
}
.nav-btn::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: var(--color-surface-hover);
   opacity: 0;
   transition: var(--transition-opacity);
   border-radius: var(--radius-xl);
}
.nav-btn:hover::before {
   opacity: 1;
}
.nav-btn:hover {
   color: var(--color-primary-600);
   transform: translateY(-2px);
}
.nav-btn.active {
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-primary-700));
   color: white;
   box-shadow: var(--shadow-lg);
}
.nav-btn.active::before {
   display: none;
}
.nav-btn i {
   font-size: var(--font-size-base);
   z-index: 1;
   position: relative;
}
.nav-btn span {
   z-index: 1;
   position: relative;
}
/* ===== SIDE MENU ENHANCED ===== */
.side-menu-overlay {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background: rgba(0, 0, 0, 0.6);
   z-index: var(--z-modal);
   animation: fadeIn 0.3s ease-out;
   backdrop-filter: blur(8px);
}
.side-menu {
   position: fixed;
   top: 0;
   left: 0;
   width: 320px;
   height: 100%;
   background: var(--color-surface);
   z-index: calc(var(--z-modal) + 1);
   display: flex;
   flex-direction: column;
   box-shadow: var(--shadow-2xl);
   animation: slideInLeft 0.4s var(--ease-back);
   border-right: 1px solid var(--color-border);
}
@keyframes fadeIn {
   from { opacity: 0; }
   to { opacity: 1; }
}
@keyframes slideInLeft {
   from { transform: translateX(-100%); }
   to { transform: translateX(0); }
}
.side-menu-header {
   padding: var(--space-8);
   border-bottom: 1px solid var(--color-border-light);
   display: flex;
   align-items: flex-start;
   justify-content: space-between;
   background: linear-gradient(135deg, var(--color-primary-50), var(--color-secondary-50));
}
body[data-theme='dark'] .side-menu-header {
   background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(249, 115, 22, 0.1));
}
.user-info {
   display: flex;
   gap: var(--space-4);
   flex: 1;
}
.user-avatar {
   width: 56px;
   height: 56px;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   border-radius: var(--radius-2xl);
   display: flex;
   align-items: center;
   justify-content: center;
   color: white;
   font-weight: var(--font-weight-bold);
   font-size: var(--font-size-xl);
   font-family: var(--font-family-display);
   box-shadow: var(--shadow-lg);
   position: relative;
   overflow: hidden;
}
.user-avatar::before {
   content: '';
   position: absolute;
   top: -50%;
   left: -50%;
   width: 200%;
   height: 200%;
   background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
   animation: avatarShine 4s ease-in-out infinite;
}
@keyframes avatarShine {
   0% { transform: translateX(-100%) rotate(45deg); }
   50% { transform: translateX(100%) rotate(45deg); }
   100% { transform: translateX(100%) rotate(45deg); }
}
.user-details h3 {
   font-size: var(--font-size-lg);
   font-weight: var(--font-weight-semibold);
   color: var(--color-text);
   margin-bottom: var(--space-1);
   font-family: var(--font-family-display);
}
.user-details p {
   color: var(--color-text-muted);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-medium);
}
.side-menu-close {
   width: 36px;
   height: 36px;
   background: none;
   border: none;
   border-radius: var(--radius-lg);
   color: var(--color-text-muted);
   cursor: pointer;
   transition: var(--transition-all);
   display: flex;
   align-items: center;
   justify-content: center;
}
.side-menu-close:hover {
   background: var(--color-surface-hover);
   color: var(--color-text);
   transform: scale(1.1);
}
.side-menu-content {
   flex: 1;
   padding: var(--space-6);
   overflow-y: auto;
}
.menu-nav {
   display: flex;
   flex-direction: column;
   gap: var(--space-2);
}
.menu-item {
   display: flex;
   align-items: center;
   gap: var(--space-4);
   padding: var(--space-4);
   background: none;
   border: none;
   border-radius: var(--radius-xl);
   color: var(--color-text);
   font-weight: var(--font-weight-medium);
   font-size: var(--font-size-sm);
   cursor: pointer;
   transition: var(--transition-all);
   text-align: left;
   width: 100%;
   position: relative;
   overflow: hidden;
}
.menu-item::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: linear-gradient(135deg, var(--color-primary-50), var(--color-secondary-50));
   opacity: 0;
   transition: var(--transition-opacity);
   border-radius: var(--radius-xl);
}
body[data-theme='dark'] .menu-item::before {
   background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(249, 115, 22, 0.1));
}
.menu-item:hover::before {
   opacity: 1;
}
.menu-item:hover {
   color: var(--color-primary-600);
   transform: translateX(4px);
}
.menu-item i:first-child {
   width: 20px;
   font-size: var(--font-size-lg);
   z-index: 1;
   position: relative;
}
.menu-item span {
   z-index: 1;
   position: relative;
}
.menu-item i:last-child {
   margin-left: auto;
   font-size: var(--font-size-sm);
   color: var(--color-text-muted);
   z-index: 1;
   position: relative;
   transition: var(--transition-transform);
}
.menu-item:hover i:last-child {
   transform: translateX(4px);
}
.theme-section {
   margin-top: var(--space-8);
   padding-top: var(--space-6);
   border-top: 1px solid var(--color-border-light);
}
.theme-toggle-section {
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: var(--space-4);
   background: var(--color-surface-hover);
   border-radius: var(--radius-xl);
   border: 1px solid var(--color-border-light);
}
.theme-info {
   display: flex;
   align-items: center;
   gap: var(--space-3);
   color: var(--color-text);
   font-weight: var(--font-weight-medium);
   font-size: var(--font-size-sm);
}
.theme-switch {
   width: 40px;
   height: 40px;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-primary-700));
   border: none;
   border-radius: var(--radius-full);
   color: white;
   cursor: pointer;
   transition: var(--transition-all);
   display: flex;
   align-items: center;
   justify-content: center;
   box-shadow: var(--shadow-md);
}
.theme-switch:hover {
   background: linear-gradient(135deg, var(--color-primary-700), var(--color-primary-800));
   transform: scale(1.1);
   box-shadow: var(--shadow-lg);
}
.side-menu-footer {
   padding: var(--space-6);
   border-top: 1px solid var(--color-border-light);
   text-align: center;
   background: var(--color-surface-hover);
}
.side-menu-footer p {
   color: var(--color-text-muted);
   font-size: var(--font-size-xs);
   margin: var(--space-1) 0;
   font-weight: var(--font-weight-medium);
}
/* ===== WELCOME POPUP ENHANCED ===== */
.welcome-popup-overlay {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background: rgba(0, 0, 0, 0.8);
   display: flex;
   align-items: center;
   justify-content: center;
   z-index: var(--z-modal);
   padding: var(--space-4);
   backdrop-filter: blur(12px);
   animation: fadeIn 0.5s ease-out;
}
.welcome-popup {
   background: var(--color-surface);
   border-radius: var(--radius-3xl);
   max-width: 540px;
   width: 100%;
   padding: var(--space-10);
   text-align: center;
   box-shadow: var(--shadow-2xl);
   animation: popupSlideUp 0.6s var(--ease-back);
   border: 1px solid var(--color-border-light);
   position: relative;
   overflow: hidden;
}
.welcome-popup::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   height: 120px;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   z-index: -1;
}
@keyframes popupSlideUp {
   from { 
       transform: translateY(60px) scale(0.9); 
       opacity: 0; 
   }
   to { 
       transform: translateY(0) scale(1); 
       opacity: 1; 
   }
}
.welcome-header {
   margin-bottom: var(--space-8);
   position: relative;
}
.welcome-header .logo-icon {
   width: 80px;
   height: 80px;
   background: var(--glass-bg);
   backdrop-filter: blur(20px);
   border: 2px solid var(--glass-border);
   border-radius: var(--radius-2xl);
   display: flex;
   align-items: center;
   justify-content: center;
   margin: 0 auto var(--space-6);
   box-shadow: var(--glass-shadow);
   animation: logoFloat 3s ease-in-out infinite;
}
.welcome-header .logo-text {
   font-size: var(--font-size-3xl);
   font-weight: var(--font-weight-extrabold);
   font-family: var(--font-family-display);
   color: white;
}
.welcome-header h2 {
   font-family: var(--font-family-display);
   font-size: var(--font-size-3xl);
   font-weight: var(--font-weight-extrabold);
   color: var(--color-text);
   margin-bottom: var(--space-3);
   letter-spacing: -0.02em;
}
.welcome-header p {
   color: var(--color-text-muted);
   font-size: var(--font-size-lg);
   font-weight: var(--font-weight-medium);
}
.welcome-features {
   display: grid;
   grid-template-columns: 1fr;
   gap: var(--space-6);
   margin-bottom: var(--space-10);
}
.feature-item {
   text-align: center;
   padding: var(--space-6);
   background: var(--color-surface-hover);
   border-radius: var(--radius-2xl);
   border: 1px solid var(--color-border-light);
   transition: var(--transition-all);
   position: relative;
   overflow: hidden;
}
.feature-item::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: linear-gradient(135deg, var(--color-primary-50), var(--color-secondary-50));
   opacity: 0;
   transition: var(--transition-opacity);
}
body[data-theme='dark'] .feature-item::before {
   background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(249, 115, 22, 0.1));
}
.feature-item:hover::before {
   opacity: 1;
}
.feature-item:hover {
   border-color: var(--color-primary-300);
   transform: translateY(-4px);
   box-shadow: var(--shadow-xl);
}
.feature-item i {
   font-size: var(--font-size-3xl);
   color: var(--color-primary-600);
   margin-bottom: var(--space-4);
   z-index: 1;
   position: relative;
}
.feature-item h3 {
   font-family: var(--font-family-display);
   font-size: var(--font-size-xl);
   font-weight: var(--font-weight-bold);
   color: var(--color-text);
   margin-bottom: var(--space-2);
   z-index: 1;
   position: relative;
}
.feature-item p {
   color: var(--color-text-muted);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-medium);
   line-height: var(--line-height-relaxed);
   z-index: 1;
   position: relative;
}
.welcome-btn {
   width: 100%;
   padding: var(--space-5) var(--space-6);
   font-size: var(--font-size-lg);
   font-weight: var(--font-weight-semibold);
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   color: white;
   border: none;
   border-radius: var(--radius-2xl);
   cursor: pointer;
   transition: var(--transition-all);
   display: flex;
   align-items: center;
   justify-content: center;
   gap: var(--space-3);
   box-shadow: var(--shadow-lg);
   position: relative;
   overflow: hidden;
}
.welcome-btn::before {
   content: '';
   position: absolute;
   top: 0;
   left: -100%;
   width: 100%;
   height: 100%;
   background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
   transition: var(--transition-transform);
}
.welcome-btn:hover::before {
   transform: translateX(200%);
}
.welcome-btn:hover {
   transform: translateY(-2px);
   box-shadow: var(--shadow-xl);
}
.welcome-btn:active {
   transform: translateY(0);
}
/* ===== CONTAINER & LAYOUT ===== */
.app-container {
   min-height: 100vh;
   display: flex;
   flex-direction: column;
}
.main-content {
   flex: 1;
   max-width: 1280px;
   margin: 0 auto;
   padding: var(--space-8) var(--space-6);
   width: 100%;
}
/* ===== ENHANCED AUTHENTICATION ===== */
.auth-wrapper {
   min-height: 100vh;
   display: flex;
   align-items: center;
   justify-content: center;
   padding: var(--space-4);
   background: 
       radial-gradient(circle at 25% 25%, rgba(37, 99, 235, 0.1) 0%, transparent 60%),
       radial-gradient(circle at 75% 75%, rgba(249, 115, 22, 0.1) 0%, transparent 60%);
   position: relative;
   overflow: hidden;
}
.auth-wrapper::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23f3f4f6' fill-opacity='0.03'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
   animation: patternFloat 20s ease-in-out infinite;
}
.auth-container {
   width: 100%;
   max-width: 480px;
   background: var(--glass-bg);
   backdrop-filter: blur(20px);
   border: 1px solid var(--glass-border);
   border-radius: var(--radius-3xl);
   box-shadow: var(--glass-shadow);
   overflow: hidden;
   animation: slideUp 0.8s var(--ease-back);
   position: relative;
}
.auth-header {
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   color: white;
   text-align: center;
   padding: var(--space-10);
   position: relative;
   overflow: hidden;
}
.auth-header::before {
   content: '';
   position: absolute;
   top: -50%;
   left: -50%;
   width: 200%;
   height: 200%;
   background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill='white' fill-opacity='0.05'%3E%3Cpath d='M20 20c0 11.046-8.954 20-20 20s-20-8.954-20-20 8.954-20 20-20 20 8.954 20 20zm10 0c0-16.569-13.431-30-30-30s-30 13.431-30 30 13.431 30 30 30 30-13.431 30-30z'/%3E%3C/g%3E%3C/svg%3E") repeat;
   animation: authPattern 30s linear infinite;
}
@keyframes authPattern {
   0% { transform: translate(0, 0); }
   100% { transform: translate(40px, 40px); }
}
.auth-header .logo-icon {
   width: 80px;
   height: 80px;
   background: var(--glass-bg);
   backdrop-filter: blur(20px);
   border: 2px solid var(--glass-border);
   border-radius: var(--radius-2xl);
   display: flex;
   align-items: center;
   justify-content: center;
   margin: 0 auto var(--space-4);
   box-shadow: var(--glass-shadow);
   z-index: 1;
   position: relative;
}
.auth-header .logo-text {
   font-size: var(--font-size-3xl);
   font-weight: var(--font-weight-extrabold);
   font-family: var(--font-family-display);
   color: white;
}
.auth-header h1 {
   font-family: var(--font-family-display);
   font-size: var(--font-size-4xl);
   font-weight: var(--font-weight-black);
   margin: 0 0 var(--space-2) 0;
   letter-spacing: -0.02em;
   z-index: 1;
   position: relative;
}
.auth-header p {
   opacity: 0.95;
   font-size: var(--font-size-lg);
   font-weight: var(--font-weight-medium);
   z-index: 1;
   position: relative;
}
.auth-content {
   padding: var(--space-8);
}
.auth-tabs {
   display: flex;
   background: var(--color-surface-hover);
   border-radius: var(--radius-xl);
   padding: var(--space-1);
   margin-bottom: var(--space-8);
   border: 1px solid var(--color-border-light);
}
.auth-tab {
   flex: 1;
   padding: var(--space-3) var(--space-4);
   text-align: center;
   background: none;
   border: none;
   border-radius: var(--radius-lg);
   cursor: pointer;
   font-weight: var(--font-weight-semibold);
   font-size: var(--font-size-sm);
   color: var(--color-text-muted);
   transition: var(--transition-all);
   position: relative;
}
.auth-tab.active {
   background: var(--color-surface);
   color: var(--color-primary-600);
   box-shadow: var(--shadow-sm);
   transform: translateY(-1px);
}
.auth-form {
   display: flex;
   flex-direction: column;
   gap: var(--space-6);
}
/* ===== ENHANCED FORM ELEMENTS ===== */
.form-group {
   display: flex;
   flex-direction: column;
   gap: var(--space-2);
}
.form-label {
   font-weight: var(--font-weight-semibold);
   color: var(--color-text);
   font-size: var(--font-size-sm);
   display: flex;
   align-items: center;
   gap: var(--space-2);
   margin-bottom: var(--space-1);
}
.form-input {
   width: 100%;
   padding: var(--space-4);
   border: 2px solid var(--color-border);
   border-radius: var(--radius-xl);
   font-size: var(--font-size-base);
   font-weight: var(--font-weight-medium);
   background: var(--color-surface);
   color: var(--color-text);
   transition: var(--transition-all);
   font-family: inherit;
}
.form-input:focus {
   outline: none;
   border-color: var(--color-primary-500);
   box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
   transform: translateY(-1px);
}
.form-input::placeholder {
   color: var(--color-text-muted);
   font-weight: var(--font-weight-normal);
}
.form-textarea {
   min-height: 120px;
   resize: vertical;
   font-family: inherit;
   line-height: var(--line-height-relaxed);
}
.form-select {
   appearance: none;
   background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
   background-position: right var(--space-4) center;
   background-repeat: no-repeat;
   background-size: 1em 1em;
   padding-right: calc(var(--space-4) + 1.5em);
}
.interests-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
   gap: var(--space-3);
   margin-top: var(--space-3);
}
.interest-chip {
   display: flex;
   align-items: center;
   gap: var(--space-2);
   padding: var(--space-3);
   background: var(--color-surface-hover);
   border: 2px solid var(--color-border);
   border-radius: var(--radius-xl);
   cursor: pointer;
   transition: var(--transition-all);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-medium);
   position: relative;
   overflow: hidden;
}
.interest-chip::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: linear-gradient(135deg, var(--color-primary-50), var(--color-secondary-50));
   opacity: 0;
   transition: var(--transition-opacity);
}
body[data-theme='dark'] .interest-chip::before {
   background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(249, 115, 22, 0.1));
}
.interest-chip:hover::before {
   opacity: 1;
}
.interest-chip:hover {
   border-color: var(--color-primary-300);
   transform: translateY(-2px);
   box-shadow: var(--shadow-lg);
}
.interest-chip.selected {
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   border-color: var(--color-primary-600);
   color: white;
   box-shadow: var(--shadow-lg);
}
.interest-chip.selected::before {
   display: none;
}
.interest-chip input {
   display: none;
}
.interest-chip i {
   z-index: 1;
   position: relative;
}
.interest-chip span {
   z-index: 1;
   position: relative;
}
/* ===== ENHANCED BUTTONS ===== */
.btn-primary {
   width: 100%;
   padding: var(--space-4) var(--space-6);
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-primary-700));
   color: white;
   border: none;
   border-radius: var(--radius-2xl);
   font-size: var(--font-size-base);
   font-weight: var(--font-weight-semibold);
   font-family: inherit;
   cursor: pointer;
   transition: var(--transition-all);
   position: relative;
   overflow: hidden;
   display: flex;
   align-items: center;
   justify-content: center;
   gap: var(--space-2);
   box-shadow: var(--shadow-lg);
}
.btn-primary::before {
   content: '';
   position: absolute;
   top: 0;
   left: -100%;
   width: 100%;
   height: 100%;
   background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
   transition: var(--transition-transform);
}
.btn-primary:hover::before {
   transform: translateX(200%);
}
.btn-primary:hover {
   background: linear-gradient(135deg, var(--color-primary-700), var(--color-primary-800));
   transform: translateY(-2px);
   box-shadow: var(--shadow-xl);
}
.btn-primary:active {
   transform: translateY(0);
}
.btn-primary:disabled {
   opacity: 0.6;
   cursor: not-allowed;
   transform: none;
   background: var(--color-gray-400);
}
.btn-secondary {
   background: linear-gradient(135deg, var(--color-secondary-500), var(--color-secondary-600));
   color: white;
   border: none;
   padding: var(--space-3) var(--space-5);
   border-radius: var(--radius-xl);
   font-weight: var(--font-weight-semibold);
   font-size: var(--font-size-sm);
   cursor: pointer;
   transition: var(--transition-all);
   display: flex;
   align-items: center;
   justify-content: center;
   gap: var(--space-2);
   box-shadow: var(--shadow-md);
   position: relative;
   overflow: hidden;
}
.btn-secondary::before {
   content: '';
   position: absolute;
   top: 0;
   left: -100%;
   width: 100%;
   height: 100%;
   background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
   transition: var(--transition-transform);
}
.btn-secondary:hover::before {
   transform: translateX(200%);
}
.btn-secondary:hover {
   background: linear-gradient(135deg, var(--color-secondary-600), var(--color-secondary-700));
   transform: translateY(-1px);
   box-shadow: var(--shadow-lg);
}
.btn-outline {
   background: transparent;
   color: var(--color-primary-600);
   border: 2px solid var(--color-primary-600);
   padding: var(--space-3) var(--space-5);
   border-radius: var(--radius-xl);
   font-weight: var(--font-weight-semibold);
   font-size: var(--font-size-sm);
   cursor: pointer;
   transition: var(--transition-all);
   display: flex;
   align-items: center;
   justify-content: center;
   gap: var(--space-2);
   position: relative;
   overflow: hidden;
}
.btn-outline::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-primary-700));
   transform: scaleX(0);
   transition: var(--transition-transform);
   transform-origin: left;
}
.btn-outline:hover::before {
   transform: scaleX(1);
}
.btn-outline:hover {
   color: white;
   border-color: var(--color-primary-600);
   transform: translateY(-1px);
   box-shadow: var(--shadow-lg);
}
.btn-outline span {
   z-index: 1;
   position: relative;
}
.btn-outline i {
   z-index: 1;
   position: relative;
}
.btn-sm {
   padding: var(--space-2) var(--space-3);
   font-size: var(--font-size-xs);
}
/* ===== STATUS MESSAGES ===== */
.error-message {
   background: var(--color-error-50);
   color: var(--color-error-600);
   padding: var(--space-4);
   border-radius: var(--radius-xl);
   border-left: 4px solid var(--color-error-500);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-medium);
   display: flex;
   align-items: center;
   gap: var(--space-3);
   animation: slideIn 0.3s ease-out;
}
.success-message {
   background: var(--color-success-50);
   color: var(--color-success-600);
   padding: var(--space-4);
   border-radius: var(--radius-xl);
   border-left: 4px solid var(--color-success-500);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-medium);
   display: flex;
   align-items: center;
   gap: var(--space-3);
   animation: slideIn 0.3s ease-out;
}
@keyframes slideIn {
   from { 
       transform: translateY(-10px); 
       opacity: 0; 
   }
   to { 
       transform: translateY(0); 
       opacity: 1; 
   }
}
/* ===== ENHANCED FEED ===== */
.feed-wrapper {
   max-width: 900px;
   margin: 0 auto;
}
.feed-header {
   text-align: center;
   margin-bottom: var(--space-12);
   position: relative;
}
.feed-title {
   font-family: var(--font-family-display);
   font-size: var(--font-size-5xl);
   font-weight: var(--font-weight-black);
   color: var(--color-text);
   margin-bottom: var(--space-3);
   letter-spacing: -0.02em;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   -webkit-background-clip: text;
   -webkit-text-fill-color: transparent;
   background-clip: text;
}
.feed-subtitle {
   color: var(--color-text-muted);
   font-size: var(--font-size-xl);
   font-weight: var(--font-weight-medium);
   max-width: 600px;
   margin: 0 auto;
   line-height: var(--line-height-relaxed);
}
.search-filter-section {
   background: var(--glass-bg);
   backdrop-filter: blur(20px);
   border: 1px solid var(--glass-border);
   border-radius: var(--radius-3xl);
   padding: var(--space-8);
   margin-bottom: var(--space-12);
   box-shadow: var(--glass-shadow);
}
.search-bar {
   position: relative;
   margin-bottom: var(--space-6);
}
.search-input {
   width: 100%;
   padding: var(--space-4) var(--space-4) var(--space-4) calc(var(--space-4) + 2rem);
   border: 2px solid var(--color-border);
   border-radius: var(--radius-2xl);
   font-size: var(--font-size-lg);
   font-weight: var(--font-weight-medium);
   background: var(--color-surface);
   color: var(--color-text);
   transition: var(--transition-all);
}
.search-input:focus {
   outline: none;
   border-color: var(--color-primary-500);
   box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
   transform: translateY(-2px);
}
.search-icon {
   position: absolute;
   left: var(--space-4);
   top: 50%;
   transform: translateY(-50%);
   color: var(--color-text-muted);
   font-size: var(--font-size-lg);
   z-index: 1;
}
.filter-categories {
   display: flex;
   flex-wrap: wrap;
   gap: var(--space-3);
   justify-content: center;
}
.category-chip {
   padding: var(--space-3) var(--space-4);
   background: var(--color-surface-hover);
   border: 2px solid var(--color-border);
   border-radius: var(--radius-full);
   cursor: pointer;
   transition: var(--transition-all);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-semibold);
   position: relative;
   overflow: hidden;
}
.category-chip::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   transform: scaleX(0);
   transition: var(--transition-transform);
   transform-origin: left;
}
.category-chip:hover::before {
   transform: scaleX(1);
}
.category-chip:hover {
   border-color: var(--color-primary-500);
   color: white;
   transform: translateY(-2px);
   box-shadow: var(--shadow-lg);
}
.category-chip span {
   z-index: 1;
   position: relative;
}
.category-chip.selected {
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   border-color: var(--color-primary-600);
   color: white;
   box-shadow: var(--shadow-lg);
}
.category-chip.selected::before {
   display: none;
}
/* ===== TRENDING & RECOMMENDED SECTIONS ===== */
.trending-section,
.recommended-section {
   margin-bottom: var(--space-12);
}
.section-header {
   display: flex;
   align-items: center;
   gap: var(--space-3);
   margin-bottom: var(--space-8);
}
.section-title {
   font-family: var(--font-family-display);
   font-size: var(--font-size-2xl);
   font-weight: var(--font-weight-bold);
   color: var(--color-text);
   margin: 0;
   letter-spacing: -0.01em;
}
.section-icon {
   font-size: var(--font-size-xl);
   color: var(--color-secondary-500);
}
.horizontal-scroll {
   display: flex;
   gap: var(--space-6);
   overflow-x: auto;
   padding-bottom: var(--space-4);
   scrollbar-width: none;
   -ms-overflow-style: none;
   scroll-behavior: smooth;
}
.horizontal-scroll::-webkit-scrollbar {
   display: none;
}
.trend-card,
.recommendation-card {
   flex: 0 0 auto;
   width: 320px;
   background: var(--color-surface);
   border-radius: var(--radius-3xl);
   padding: var(--space-6);
   box-shadow: var(--shadow-lg);
   cursor: pointer;
   transition: var(--transition-all);
   border: 1px solid var(--color-border-light);
   position: relative;
   overflow: hidden;
}
.trend-card::before,
.recommendation-card::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   opacity: 0;
   transition: var(--transition-opacity);
   pointer-events: none;
}
.trend-card::before {
   background: linear-gradient(135deg, 
       rgba(249, 115, 22, 0.05) 0%, 
       rgba(249, 115, 22, 0.1) 100%);
}
.recommendation-card::before {
   background: linear-gradient(135deg, 
       rgba(37, 99, 235, 0.05) 0%, 
       rgba(37, 99, 235, 0.1) 100%);
}
.trend-card:hover::before,
.recommendation-card:hover::before {
   opacity: 1;
}
.trend-card:hover,
.recommendation-card:hover {
   transform: translateY(-8px) scale(1.02);
   box-shadow: var(--shadow-2xl);
   border-color: var(--color-secondary-300);
}
.recommendation-card:hover {
   border-color: var(--color-primary-300);
}
.card-title {
   font-family: var(--font-family-display);
   font-size: var(--font-size-xl);
   font-weight: var(--font-weight-bold);
   color: var(--color-text);
   margin-bottom: var(--space-2);
   line-height: var(--line-height-tight);
   z-index: 1;
   position: relative;
}
.card-meta {
   color: var(--color-text-muted);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-medium);
   margin-bottom: var(--space-4);
   z-index: 1;
   position: relative;
}
.participants-count {
   display: flex;
   align-items: center;
   gap: var(--space-2);
   color: var(--color-secondary-600);
   font-weight: var(--font-weight-semibold);
   font-size: var(--font-size-sm);
   z-index: 1;
   position: relative;
}
.participants-count i {
   font-size: var(--font-size-base);
}
/* ===== ENHANCED EVENT CARDS ===== */
.event-list {
   display: grid;
   gap: var(--space-8);
}
.event-card {
   background: var(--color-surface);
   border-radius: var(--radius-3xl);
   overflow: hidden;
   box-shadow: var(--shadow-lg);
   transition: var(--transition-all);
   border: 1px solid var(--color-border-light);
   position: relative;
}
.event-card:hover {
   transform: translateY(-4px);
   box-shadow: var(--shadow-2xl);
   border-color: var(--color-primary-300);
}
.event-image {
   width: 100%;
   height: 240px;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   display: flex;
   align-items: center;
   justify-content: center;
   color: white;
   font-size: var(--font-size-5xl);
   position: relative;
   overflow: hidden;
}
.event-image::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
   transform: translateX(-100%);
   transition: var(--transition-transform);
}
.event-card:hover .event-image::before {
   transform: translateX(100%);
}
.event-image::after {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: rgba(0, 0, 0, 0.1);
}
.event-image i {
   z-index: 1;
   position: relative;
   text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}
.event-content {
   padding: var(--space-6);
}
.event-header {
   display: flex;
   justify-content: space-between;
   align-items: flex-start;
   margin-bottom: var(--space-4);
}
.event-title {
   font-family: var(--font-family-display);
   font-size: var(--font-size-xl);
   font-weight: var(--font-weight-bold);
   color: var(--color-text);
   margin: 0 0 var(--space-2) 0;
   line-height: var(--line-height-tight);
   letter-spacing: -0.01em;
}
.favorite-btn {
   background: none;
   border: none;
   font-size: var(--font-size-xl);
   cursor: pointer;
   color: var(--color-text-muted);
   transition: var(--transition-all);
   padding: var(--space-2);
   border-radius: var(--radius-lg);
   width: 44px;
   height: 44px;
   display: flex;
   align-items: center;
   justify-content: center;
}
.favorite-btn:hover {
   color: var(--color-secondary-500);
   background: var(--color-secondary-50);
   transform: scale(1.1);
}
body[data-theme='dark'] .favorite-btn:hover {
   background: rgba(249, 115, 22, 0.1);
}
.favorite-btn.favorited {
   color: var(--color-secondary-500);
   background: var(--color-secondary-50);
}
body[data-theme='dark'] .favorite-btn.favorited {
   background: rgba(249, 115, 22, 0.1);
}
.event-category {
   display: inline-block;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   color: white;
   padding: var(--space-2) var(--space-4);
   border-radius: var(--radius-full);
   font-size: var(--font-size-xs);
   font-weight: var(--font-weight-bold);
   text-transform: uppercase;
   letter-spacing: 0.05em;
   box-shadow: var(--shadow-md);
}
.event-meta {
   display: flex;
   flex-direction: column;
   gap: var(--space-3);
   margin: var(--space-4) 0;
}
.event-meta-item {
   display: flex;
   align-items: center;
   gap: var(--space-3);
   color: var(--color-text-muted);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-medium);
}
.event-meta-item i {
   width: 18px;
   color: var(--color-primary-600);
   font-size: var(--font-size-base);
}
.event-description {
   color: var(--color-text-muted);
   line-height: var(--line-height-relaxed);
   margin-bottom: var(--space-6);
   font-weight: var(--font-weight-medium);
}
.event-actions {
   display: flex;
   gap: var(--space-3);
}
/* ===== PROFILE ENHANCED ===== */
.profile-wrapper {
   max-width: 700px;
   margin: 0 auto;
}
.profile-header {
   text-align: center;
   background: var(--glass-bg);
   backdrop-filter: blur(20px);
   border: 1px solid var(--glass-border);
   border-radius: var(--radius-3xl);
   padding: var(--space-10);
   margin-bottom: var(--space-8);
   box-shadow: var(--glass-shadow);
   position: relative;
   overflow: hidden;
}
.profile-header::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   height: 120px;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   z-index: -1;
}
.profile-avatar {
   width: 100px;
   height: 100px;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   border-radius: var(--radius-full);
   display: flex;
   align-items: center;
   justify-content: center;
   margin: 0 auto var(--space-4);
   color: white;
   font-size: var(--font-size-3xl);
   font-weight: var(--font-weight-extrabold);
   font-family: var(--font-family-display);
   box-shadow: var(--shadow-2xl);
   border: 4px solid white;
   position: relative;
   overflow: hidden;
}
.profile-avatar::before {
   content: '';
   position: absolute;
   top: -50%;
   left: -50%;
   width: 200%;
   height: 200%;
   background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
   animation: avatarShine 4s ease-in-out infinite;
}
.profile-name {
   font-family: var(--font-family-display);
   font-size: var(--font-size-3xl);
   font-weight: var(--font-weight-extrabold);
   color: var(--color-text);
   margin: 0 0 var(--space-2) 0;
   letter-spacing: -0.02em;
}
.profile-email {
   color: var(--color-text-muted);
   font-size: var(--font-size-base);
   font-weight: var(--font-weight-medium);
}
.profile-form,
.profile-section {
   background: var(--color-surface);
   border-radius: var(--radius-3xl);
   padding: var(--space-8);
   margin-bottom: var(--space-8);
   box-shadow: var(--shadow-lg);
   border: 1px solid var(--color-border-light);
}
/* ===== MY EVENTS LIST ENHANCED ===== */
.my-events-section {
   background: var(--glass-bg);
   backdrop-filter: blur(20px);
   border: 1px solid var(--glass-border);
   box-shadow: var(--glass-shadow);
}
.my-events-list {
   display: flex;
   flex-direction: column;
   gap: var(--space-4);
}
.my-event-item {
   display: flex;
   align-items: center;
   justify-content: space-between;
   padding: var(--space-6);
   background: var(--color-surface-hover);
   border-radius: var(--radius-2xl);
   border: 1px solid var(--color-border-light);
   transition: var(--transition-all);
   position: relative;
   overflow: hidden;
}
.my-event-item::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: linear-gradient(135deg, var(--color-primary-50), var(--color-secondary-50));
   opacity: 0;
   transition: var(--transition-opacity);
}
body[data-theme='dark'] .my-event-item::before {
   background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(249, 115, 22, 0.1));
}
.my-event-item:hover::before {
   opacity: 1;
}
.my-event-item:hover {
   border-color: var(--color-primary-300);
   transform: translateY(-2px);
   box-shadow: var(--shadow-xl);
}
.event-info {
   flex: 1;
   z-index: 1;
   position: relative;
}
.event-info .event-title {
   font-family: var(--font-family-display);
   font-size: var(--font-size-lg);
   font-weight: var(--font-weight-bold);
   color: var(--color-text);
   margin-bottom: var(--space-2);
   letter-spacing: -0.01em;
}
.event-details {
   display: flex;
   gap: var(--space-6);
   flex-wrap: wrap;
}
.event-date,
.event-location {
   display: flex;
   align-items: center;
   gap: var(--space-2);
   color: var(--color-text-muted);
   font-size: var(--font-size-sm);
   font-weight: var(--font-weight-medium);
}
.event-status {
   display: flex;
   align-items: center;
   gap: var(--space-2);
   font-size: var(--font-size-xs);
   font-weight: var(--font-weight-bold);
   padding: var(--space-2) var(--space-3);
   border-radius: var(--radius-full);
   text-transform: uppercase;
   letter-spacing: 0.05em;
}
.event-status.futuro {
   background: var(--color-success-50);
   color: var(--color-success-600);
}
.event-status.passato {
   background: var(--color-gray-100);
   color: var(--color-gray-600);
}
body[data-theme='dark'] .event-status.futuro {
   background: rgba(16, 185, 129, 0.1);
}
body[data-theme='dark'] .event-status.passato {
   background: rgba(107, 114, 128, 0.1);
}
.event-actions {
   display: flex;
   gap: var(--space-3);
   z-index: 1;
   position: relative;
}
.empty-state {
   text-align: center;
   padding: var(--space-12);
   color: var(--color-text-muted);
}
.empty-icon {
   font-size: var(--font-size-5xl);
   margin-bottom: var(--space-6);
   color: var(--color-gray-300);
}
.empty-state h4 {
   font-family: var(--font-family-display);
   font-size: var(--font-size-xl);
   font-weight: var(--font-weight-bold);
   color: var(--color-text);
   margin-bottom: var(--space-3);
}
.empty-state p {
   font-size: var(--font-size-base);
   color: var(--color-text-muted);
   max-width: 400px;
   margin: 0 auto;
   line-height: var(--line-height-relaxed);
}
/* ===== GAMIFICATION ENHANCED ===== */
.gamification-wrapper {
   background: linear-gradient(135deg, 
       rgba(249, 115, 22, 0.05) 0%, 
       rgba(37, 99, 235, 0.05) 100%);
   border: 1px solid rgba(249, 115, 22, 0.2);
   position: relative;
   overflow: hidden;
}
.gamification-wrapper::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill='%23f97316' fill-opacity='0.03'%3E%3Cpath d='M20 20c0 11.046-8.954 20-20 20s-20-8.954-20-20 8.954-20 20-20 20 8.954 20 20zm10 0c0-16.569-13.431-30-30-30s-30 13.431-30 30 13.431 30 30 30 30-13.431 30-30z'/%3E%3C/g%3E%3C/svg%3E") repeat;
   animation: patternFloat 20s ease-in-out infinite;
}
.stats-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
   gap: var(--space-4);
   margin-top: var(--space-6);
   z-index: 1;
   position: relative;
}
.stat-item {
   text-align: center;
   padding: var(--space-6);
   background: var(--color-surface);
   border-radius: var(--radius-2xl);
   border: 1px solid var(--color-border-light);
   transition: var(--transition-all);
   box-shadow: var(--shadow-sm);
}
.stat-item:hover {
   transform: translateY(-4px);
   box-shadow: var(--shadow-lg);
}
.stat-value {
   font-family: var(--font-family-display);
   font-size: var(--font-size-3xl);
   font-weight: var(--font-weight-extrabold);
   color: var(--color-primary-600);
   margin-bottom: var(--space-1);
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   -webkit-background-clip: text;
   -webkit-text-fill-color: transparent;
   background-clip: text;
}
.stat-label {
   font-size: var(--font-size-sm);
   color: var(--color-text-muted);
   font-weight: var(--font-weight-semibold);
}
.level-progress {
   background: var(--color-gray-200);
   border-radius: var(--radius-full);
   height: 12px;
   overflow: hidden;
   margin: var(--space-6) 0;
   position: relative;
   z-index: 1;
   box-shadow: var(--shadow-inner);
}
body[data-theme='dark'] .level-progress {
   background: var(--color-gray-700);
}
.progress-bar {
   height: 100%;
   background: linear-gradient(90deg, var(--color-primary-600), var(--color-secondary-500));
   border-radius: var(--radius-full);
   transition: width 0.8s var(--ease-out);
   position: relative;
   box-shadow: 0 0 20px rgba(37, 99, 235, 0.3);
}
.progress-bar::after {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
   animation: shimmer 2s infinite;
}
@keyframes shimmer {
   0% { transform: translateX(-100%); }
   100% { transform: translateX(100%); }
}
/* ===== MODAL ENHANCED ===== */
.modal-overlay {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background: rgba(0, 0, 0, 0.8);
   display: flex;
   align-items: center;
   justify-content: center;
   z-index: var(--z-modal);
   padding: var(--space-4);
   backdrop-filter: blur(12px);
   animation: fadeIn 0.4s ease-out;
}
.modal-content {
   background: var(--color-surface);
   border-radius: var(--radius-3xl);
   max-width: 700px;
   width: 100%;
   max-height: 90vh;
   overflow-y: auto;
   position: relative;
   box-shadow: var(--shadow-2xl);
   animation: modalSlideUp 0.5s var(--ease-back);
   border: 1px solid var(--color-border-light);
}
@keyframes modalSlideUp {
   from { 
       transform: translateY(60px) scale(0.95); 
       opacity: 0; 
   }
   to { 
       transform: translateY(0) scale(1); 
       opacity: 1; 
   }
}
.modal-header {
   padding: var(--space-8);
   border-bottom: 1px solid var(--color-border-light);
   position: relative;
   background: linear-gradient(135deg, var(--color-primary-50), var(--color-secondary-50));
}
body[data-theme='dark'] .modal-header {
   background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(249, 115, 22, 0.1));
}
.modal-close {
   position: absolute;
   top: var(--space-4);
   right: var(--space-4);
   width: 44px;
   height: 44px;
   background: var(--color-surface);
   border: 1px solid var(--color-border);
   border-radius: var(--radius-full);
   display: flex;
   align-items: center;
   justify-content: center;
   cursor: pointer;
   transition: var(--transition-all);
   color: var(--color-text-muted);
   box-shadow: var(--shadow-md);
}
.modal-close:hover {
   background: var(--color-error-50);
   border-color: var(--color-error-300);
   color: var(--color-error-600);
   transform: scale(1.1);
}
body[data-theme='dark'] .modal-close:hover {
   background: rgba(239, 68, 68, 0.1);
}
.modal-body {
   padding: var(--space-8);
}
.modal-title {
   font-family: var(--font-family-display);
   font-size: var(--font-size-2xl);
   font-weight: var(--font-weight-extrabold);
   color: var(--color-text);
   margin: 0 0 var(--space-6) 0;
   letter-spacing: -0.02em;
}
.participant-count {
   display: flex;
   align-items: center;
   gap: var(--space-3);
   color: var(--color-primary-600);
   font-weight: var(--font-weight-bold);
   font-size: var(--font-size-base);
   margin-bottom: var(--space-6);
   padding: var(--space-3) var(--space-4);
   background: var(--color-primary-50);
   border-radius: var(--radius-xl);
   border: 1px solid var(--color-primary-200);
}
body[data-theme='dark'] .participant-count {
   background: rgba(37, 99, 235, 0.1);
   border-color: rgba(37, 99, 235, 0.3);
}
.join-btn {
   width: 100%;
   margin-bottom: var(--space-8);
   padding: var(--space-5);
   font-size: var(--font-size-lg);
}
/* ===== CHAT & COMMENTS ENHANCED ===== */
.chat-section,
.comments-section {
   margin-top: var(--space-8);
   background: var(--color-surface-hover);
   border-radius: var(--radius-2xl);
   padding: var(--space-6);
   border: 1px solid var(--color-border-light);
}
.chat-locked {
   text-align: center;
   padding: var(--space-12);
   color: var(--color-text-muted);
}
.chat-locked i {
   font-size: var(--font-size-5xl);
   margin-bottom: var(--space-6);
   color: var(--color-gray-300);
}
.chat-locked p {
   font-size: var(--font-size-base);
   font-weight: var(--font-weight-medium);
   max-width: 300px;
   margin: 0 auto;
   line-height: var(--line-height-relaxed);
}
.section-title-small {
   font-family: var(--font-family-display);
   font-size: var(--font-size-lg);
   font-weight: var(--font-weight-bold);
   color: var(--color-text);
   margin: 0 0 var(--space-6) 0;
   display: flex;
   align-items: center;
   gap: var(--space-3);
   letter-spacing: -0.01em;
}
.chat-list,
.comments-list {
   max-height: 320px;
   overflow-y: auto;
   margin-bottom: var(--space-6);
   display: flex;
   flex-direction: column;
   gap: var(--space-4);
}
.chat-item,
.comment-item {
   background: var(--color-surface);
   padding: var(--space-4);
   border-radius: var(--radius-xl);
   box-shadow: var(--shadow-sm);
   border: 1px solid var(--color-border-light);
   transition: var(--transition-all);
}
.chat-item:hover,
.comment-item:hover {
   box-shadow: var(--shadow-md);
   transform: translateY(-1px);
}
.message-header,
.comment-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: var(--space-2);
}
.message-author,
.comment-author {
   font-weight: var(--font-weight-bold);
   color: var(--color-primary-600);
   font-size: var(--font-size-sm);
}
.message-time,
.comment-time {
   color: var(--color-text-muted);
   font-size: var(--font-size-xs);
   font-weight: var(--font-weight-medium);
}
.message-content,
.comment-content {
   color: var(--color-text);
   margin: 0;
   line-height: var(--line-height-relaxed);
   font-weight: var(--font-weight-medium);
}
.chat-form,
.comment-form {
   display: flex;
   gap: var(--space-3);
   align-items: flex-end;
}
.chat-form input,
.comment-form input {
   flex: 1;
   margin: 0;
}
.chat-form button,
.comment-form button {
   flex-shrink: 0;
   width: 48px;
   height: 48px;
   padding: 0;
   border-radius: var(--radius-xl);
}
/* ===== CREATE EVENT ENHANCED ===== */
.create-wrapper {
   max-width: 800px;
   margin: 0 auto;
}
.create-header {
   text-align: center;
   margin-bottom: var(--space-12);
}
.create-title {
   font-family: var(--font-family-display);
   font-size: var(--font-size-4xl);
   font-weight: var(--font-weight-black);
   color: var(--color-text);
   margin-bottom: var(--space-3);
   letter-spacing: -0.02em;
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   -webkit-background-clip: text;
   -webkit-text-fill-color: transparent;
   background-clip: text;
}
.create-subtitle {
   color: var(--color-text-muted);
   font-size: var(--font-size-xl);
   font-weight: var(--font-weight-medium);
   max-width: 500px;
   margin: 0 auto;
   line-height: var(--line-height-relaxed);
}
.create-form {
   background: var(--glass-bg);
   backdrop-filter: blur(20px);
   border: 1px solid var(--glass-border);
   border-radius: var(--radius-3xl);
   padding: var(--space-10);
   box-shadow: var(--glass-shadow);
}
.form-row {
   display: grid;
   grid-template-columns: 1fr 1fr;
   gap: var(--space-6);
   margin-bottom: var(--space-6);
}
.form-group.full-width {
   grid-column: 1 / -1;
}
/* ===== UTILITY CLASSES ===== */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }
.text-muted { color: var(--color-text-muted); }
.hidden { display: none; }
.visible { display: block; }
/* ===== CUSTOM SCROLLBAR ===== */
::-webkit-scrollbar {
   width: 8px;
   height: 8px;
}
::-webkit-scrollbar-track {
   background: var(--color-surface-hover);
   border-radius: var(--radius-md);
}
::-webkit-scrollbar-thumb {
   background: var(--color-border);
   border-radius: var(--radius-md);
   transition: var(--transition-colors);
}
::-webkit-scrollbar-thumb:hover {
   background: var(--color-text-muted);
}
/* ===== LOADING STATES ===== */
.loading {
   opacity: 0.6;
   pointer-events: none;
}
.skeleton {
   background: linear-gradient(90deg, 
       var(--color-border-light) 25%, 
       var(--color-border) 50%, 
       var(--color-border-light) 75%);
   background-size: 200% 100%;
   animation: loading 1.5s infinite;
   border-radius: var(--radius-md);
}
@keyframes loading {
   0% { background-position: 200% 0; }
   100% { background-position: -200% 0; }
}
/* ===== MICRO ANIMATIONS ===== */
@keyframes fadeInUp {
   from { 
       opacity: 0; 
       transform: translateY(20px); 
   }
   to { 
       opacity: 1; 
       transform: translateY(0); 
   }
}
@keyframes scaleIn {
   from { 
       opacity: 0; 
       transform: scale(0.9); 
   }
   to { 
       opacity: 1; 
       transform: scale(1); 
   }
}
@keyframes slideInRight {
   from { 
       opacity: 0; 
       transform: translateX(30px); 
   }
   to { 
       opacity: 1; 
       transform: translateX(0); 
   }
}
.animate-fade-in-up {
   animation: fadeInUp 0.6s ease-out;
}
.animate-scale-in {
   animation: scaleIn 0.4s ease-out;
}
.animate-slide-in-right {
   animation: slideInRight 0.5s ease-out;
}
/* ===== RESPONSIVE DESIGN ===== */
@media (min-width: 768px) {
   .header-nav {
       display: flex;
   }
   .app-name {
       display: block;
   }
   .welcome-features {
       grid-template-columns: repeat(3, 1fr);
   }
   .stats-grid {
       grid-template-columns: repeat(4, 1fr);
   }
   .main-content {
       padding: var(--space-12) var(--space-8);
   }
   .feed-title {
       font-size: var(--font-size-5xl);
   }
   .create-title {
       font-size: var(--font-size-4xl);
   }
}
@media (max-width: 767px) {
   .main-content {
       padding: var(--space-6) var(--space-4);
   }
   .app-name {
       display: none;
   }
   .auth-container {
       margin: var(--space-4);
   }
   .auth-content,
   .auth-header {
       padding: var(--space-6);
   }
   .form-row {
       grid-template-columns: 1fr;
       gap: var(--space-4);
   }
   .interests-grid {
       grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
   }
   .filter-categories {
       justify-content: center;
   }
   .trend-card,
   .recommendation-card {
       width: 280px;
   }
   .event-actions {
       flex-direction: column;
   }
   .modal-content {
       margin: var(--space-2);
       max-height: calc(100vh - 2rem);
   }
   .modal-body,
   .modal-header {
       padding: var(--space-6);
   }
   .horizontal-scroll {
       padding: 0 var(--space-4);
       margin: 0 calc(-1 * var(--space-4));
   }
   .stats-grid {
       grid-template-columns: repeat(2, 1fr);
   }
   .event-details {
       flex-direction: column;
       gap: var(--space-2);
   }
   .my-event-item {
       flex-direction: column;
       align-items: flex-start;
       gap: var(--space-4);
   }
   .side-menu {
       width: 300px;
   }
   .feed-title {
       font-size: var(--font-size-3xl);
   }
   .create-title {
       font-size: var(--font-size-3xl);
   }
   .profile-name {
       font-size: var(--font-size-2xl);
   }
}
@media (max-width: 480px) {
   .search-filter-section,
   .create-form,
   .profile-form,
   .profile-section {
       padding: var(--space-6);
   }
   .trend-card,
   .recommendation-card {
       width: 240px;
   }
   .event-image {
       height: 180px;
       font-size: var(--font-size-3xl);
   }
   .event-content {
       padding: var(--space-5);
   }
   .side-menu {
       width: 280px;
   }
   .welcome-popup {
       margin: var(--space-4);
       padding: var(--space-6);
   }
   .feed-title {
       font-size: var(--font-size-2xl);
   }
   .create-title {
       font-size: var(--font-size-2xl);
   }
   .logo-icon-loading {
       width: 60px;
       height: 60px;
   }
   .brand-name-loading {
       font-size: var(--font-size-3xl);
   }
}
/* ===== ACCESSIBILITY ===== */
@media (prefers-reduced-motion: reduce) {
   *,
   *::before,
   *::after {
       animation-duration: 0.01ms !important;
       animation-iteration-count: 1 !important;
       transition-duration: 0.01ms !important;
       scroll-behavior: auto !important;
   }
}
.focus-visible:focus-visible {
   outline: 2px solid var(--color-primary-500);
   outline-offset: 2px;
   border-radius: var(--radius-md);
}
/* ===== HIGH CONTRAST MODE ===== */
@media (prefers-contrast: high) {
   :root {
       --color-border: #000000;
       --color-text-muted: #000000;
   }
   body[data-theme='dark'] {
       --color-border: #ffffff;
       --color-text-muted: #ffffff;
   }
}
/* ===== PRINT STYLES ===== */
@media print {
   .no-print,
   .side-menu,
   .modal-overlay,
   .welcome-popup-overlay,
   .hamburger-menu,
   .header-nav,
   .bg-pattern,
   .bg-gradient {
       display: none !important;
   }
   .print-only {
       display: block !important;
   }
   * {
       background: transparent !important;
       color: black !important;
       box-shadow: none !important;
   }
   .main-content {
       max-width: none !important;
       margin: 0 !important;
       padding: 0 !important;
   }
   .event-card,
   .profile-section {
       break-inside: avoid;
       margin-bottom: 1rem;
       border: 1px solid #ccc;
       border-radius: 0;
   }
}
/* ===== PWA SPECIFIC ===== */
.install-app-btn {
   display: none;
   position: fixed;
   bottom: 20px;
   right: 20px;
   padding: var(--space-4);
   background: linear-gradient(135deg, var(--color-primary-600), var(--color-secondary-500));
   color: white;
   border: none;
   border-radius: var(--radius-full);
   box-shadow: var(--shadow-xl);
   cursor: pointer;
   transition: var(--transition-all);
   z-index: var(--z-50);
}
.install-app-btn:hover {
   transform: scale(1.1);
   box-shadow: var(--shadow-2xl);
}
/* ===== ADVANCED ANIMATIONS ===== */
@keyframes floatSlow {
   0%, 100% { transform: translateY(0px); }
   50% { transform: translateY(-10px); }
}
@keyframes rotateGlow {
   0% { transform: rotate(0deg); }
   100% { transform: rotate(360deg); }
}
@keyframes pulseGlow {
   0%, 100% { 
       box-shadow: 0 0 20px rgba(37, 99, 235, 0.3);
   }
   50% { 
       box-shadow: 0 0 30px rgba(37, 99, 235, 0.6), 0 0 40px rgba(249, 115, 22, 0.3);
   }
}
.float-animation {
   animation: floatSlow 6s ease-in-out infinite;
}
.glow-animation {
   animation: pulseGlow 3s ease-in-out infinite;
}
/* ===== DARK MODE SPECIFIC ADJUSTMENTS ===== */
body[data-theme='dark'] .auth-tab.active {
   background: var(--color-gray-800);
   box-shadow: var(--shadow-lg);
}
body[data-theme='dark'] .form-input:focus {
   box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
}
body[data-theme='dark'] .search-input:focus {
   box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
}
/* ===== ENHANCED TRANSITIONS ===== */
.page-transition-enter {
   opacity: 0;
   transform: translateY(20px);
}
.page-transition-enter-active {
   opacity: 1;
   transform: translateY(0);
   transition: opacity 300ms ease-out, transform 300ms ease-out;
}
.page-transition-exit {
   opacity: 1;
   transform: translateY(0);
}
.page-transition-exit-active {
   opacity: 0;
   transform: translateY(-20px);
   transition: opacity 200ms ease-in, transform 200ms ease-in;
}
/*
 * sw.js
 * Service Worker per SocialSpot. Implementa caching delle risorse statiche e gestisce le notifiche push.
 */
const CACHE_NAME = 'socialspot-cache-v2';
const URLS_TO_CACHE = [
    '/',
    '/index.html',
    '/styles.css',
    '/app.js',
    '/components.js',
    '/sw.js'
];
// Installazione: pre-caching delle risorse essenziali
self.addEventListener('install', (event) => {
    event.waitUntil(
        caches.open(CACHE_NAME).then((cache) => cache.addAll(URLS_TO_CACHE))
    );
    self.skipWaiting();
});
// Attivazione: pulizia vecchie cache
self.addEventListener('activate', (event) => {
    event.waitUntil(
        caches.keys().then((cacheNames) => Promise.all(
            cacheNames.map((cacheName) => {
                if (cacheName !== CACHE_NAME) {
                    return caches.delete(cacheName);
                }
            })
        ))
    );
    self.clients.claim();
});
// Strategia cache-first con fallback in rete
self.addEventListener('fetch', (event) => {
    event.respondWith(
        caches.match(event.request).then((response) => {
            return response || fetch(event.request).then((resp) => {
                if (event.request.method === 'GET' && resp.status === 200 && resp.type === 'basic') {
                    const respClone = resp.clone();
                    caches.open(CACHE_NAME).then((cache) => {
                        cache.put(event.request, respClone);
                    });
                }
                return resp;
            });
        })
    );
});
// Gestione notifiche push. √É¬à responsabilit√É  del server inviare payload idonei.
self.addEventListener('push', (event) => {
    let data = { title: 'SocialSpot', body: 'Hai una nuova notifica' };
    if (event.data) {
        try {
            data = event.data.json();
        } catch (e) {
            // fallback a stringa
            data.body = event.data.text();
        }
    }
    const options = {
        body: data.body,
        icon: '/favicon.ico',
        vibrate: [100, 50, 100],
        data: { dateOfArrival: Date.now(), primaryKey: 1 }
    };
    event.waitUntil(self.registration.showNotification(data.title, options));
});
{
  "functions": {
    "api/index.js": {
      "runtime": "nodejs18.x"
    }
  },
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "/api/$1"
    },
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
